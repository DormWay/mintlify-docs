---
title: "Roadmap & Feedback System"
description: "Build a transparent, student-driven feedback system that embodies \"for students, by students.\" Every feature on DormWay should originate from student voices,..."
---

# Roadmap & Feedback System

**Status:** Phase 1 In Progress
**Owner:** Engineering
**Created:** 2025-10-26
**Tags:** #feature #roadmap #feedback #community #ace-integration

---

## ğŸ¯ Vision

Build a transparent, student-driven feedback system that embodies "for students, by students." Every feature on DormWay should originate from student voices, with voting determining priority. Students aren't just usersâ€”they're co-builders shaping their own experience.

---

## ğŸ“ Core Ethos: For Students, By Students

### Principles
1. **Transparency First** - Students see exactly what's being built and why
2. **Democratic Priority** - Vote counts determine what gets built
3. **Student Ownership** - "You're not using DormWay, you're building it"
4. **Community-Driven** - Students helping students through shared needs
5. **Close the Loop** - Students see their feedback become reality

### Messaging Examples
- âœ… "147 students like you requested this"
- âœ… "You + 44 others want this feature"
- âœ… "Your voice shaped this - Dark mode ships next week!"
- âœ… "This week: 127 students shaped the roadmap"
- âŒ "Feature request submitted" (too corporate)
- âŒ "Admin will review" (not student-centric)

---

## ğŸ“‹ Access Model

### Public Users (Not Logged In)
âœ… **Can:**
- View roadmap timeline
- Browse all feature requests
- See vote counts and descriptions
- Read comments and discussions
- Understand product direction

âŒ **Cannot:**
- Vote on features
- Submit requests
- Comment
- Track their submissions

ğŸ¯ **CTA Messaging:**
> "Sign up to vote on features and shape DormWay with other students"

### Authenticated Users (Logged In)
âœ… **Everything public users can do, PLUS:**
- Vote on roadmap items
- Vote on feature requests (unlimited)
- Submit new feature requests (via Ace or form)
- Edit/delete their own submissions (within time window)
- See voting history
- Get notifications on status changes
- Earn contribution badges
- Track their impact on product

---

## ğŸ—ºï¸ Pages Overview

### 1. Public Roadmap (`/roadmap`)

**Current State:** Timeline view with Sanity CMS events

**Enhanced Features:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ Product Roadmap                                 â”‚
â”‚  Built by Students, For Students                   â”‚
â”‚                                                     â”‚
â”‚  Want to impact the roadmap? Vote on features â†’    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Stats Section:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š 847 students contributed ideas              â”‚
â”‚  ğŸ—³ï¸ 12,459 votes cast this month                â”‚
â”‚  âœ¨ 23 student requests shipped this semester   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Timeline:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â¬† 302  Dark Mode for Mobile [Vote]            â”‚
â”‚         Status: In Progress ğŸ”¨                  â”‚
â”‚         "We heard you! Building this now"       â”‚
â”‚         Requested by students â€¢ 147 votes       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Vote Integration:**
- Each timeline event card gets vote button
- Shows aggregate vote count
- Voting requires authentication
- Public users see "Sign in to vote" prompt

### 2. Feature Request Board (`/feedback`)

**Design Inspiration:** Clerk's feedback.clerk.com/roadmap

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ Feedback & Roadmap                              â”‚
â”‚  Help shape the future of DormWay                   â”‚
â”‚                                                     â”‚
â”‚  Every feature was requested by a student like you. â”‚
â”‚  Vote to show us what matters most.                 â”‚
â”‚                                                     â”‚
â”‚  [ğŸ¤ Share Your Idea] (if logged in)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Filters:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status: [All] [In Progress] [Planned] [Backlog]â”‚
â”‚  Sort by: [Most Votes â–¼] [Recent] [Oldest]      â”‚
â”‚  Category: [All] [Mobile] [Web] [AI] [Sync]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cards:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â¬† 302  Dark mode for mobile app               â”‚
â”‚         Add dark mode toggle to settings        â”‚
â”‚         ğŸ¯ Planned â€¢ Mobile â€¢ 3 days ago        â”‚
â”‚         ğŸ’¬ 12 comments                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Card Components:**
- **Vote Button** (left, prominent)
  - Shows count
  - Filled/highlighted when user voted
  - Click to toggle vote (auth required)
  - Shows "Sign in to vote" modal for public
- **Title** (bold, 1-2 lines, clickable)
- **Description** (1-2 sentences)
- **Status Badge** (color-coded)
  - ğŸ”¨ In Progress (purple)
  - ğŸ¯ Planned (blue)
  - ğŸ“‹ Backlog (gray)
  - âœ¨ Completed (green)
  - ğŸ” Under Review (yellow)
- **Metadata**
  - Category tag
  - Relative time
  - Comment count
  - Submitter badge ("Student at UC Berkeley")

**Status Messaging:**
- In Progress â†’ "We heard you! Building this now ğŸ”¨"
- Planned â†’ "You asked, we listened! Coming soon ğŸ¯"
- Completed â†’ "You made this happen! âœ¨"
- Under Review â†’ "Team is reviewing this week ğŸ”"

### 3. My Feedback Dashboard (`/dashboard/feedback`)

**Purpose:** Personal feedback hub for authenticated users

**Sections:**

#### Your Impact
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤ Your Impact on DormWay                      â”‚
â”‚                                                 â”‚
â”‚  You've submitted 3 ideas that got 127 votes!   â”‚
â”‚  2 of your suggestions are on the roadmap.     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Your Requests
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â¬† 45  Dark mode for mobile app                â”‚
â”‚        Status: ğŸ¯ Planned                       â”‚
â”‚        You + 44 others want this                â”‚
â”‚        Submitted via Ace â€¢ 2 weeks ago          â”‚
â”‚        ğŸ’¬ "Prioritizing for next sprint!"       â”‚
â”‚        [Edit] [View Discussion] [Share]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ideas You Support
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ideas You're Supporting                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â¬† 89  Google Calendar sync improvements       â”‚
â”‚  â¬† 56  Better assignment notifications         â”‚
â”‚  â¬† 34  Study group finder                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Contribution Badges
```
ğŸŒŸ Voice Heard - First feedback submitted
ğŸ”¥ Trending Idea - 10+ votes on your request
ğŸ¯ Product Shaper - Your feature shipped
ğŸ‘¥ Community Champion - Voted on 10+ requests
ğŸ’¡ Visionary - Request in top 5 most voted
```

---

## ğŸ’¬ Ace Integration (Primary Feedback Method)

### Why Ace?
- **Natural conversation** - Students already chat with Ace
- **Lower friction** - No forms, just talk
- **Context-aware** - Ace knows where user was
- **Intelligent triage** - Categorizes and dedupes
- **Encouraging** - Makes students feel heard

### Conversation Flow

#### Basic Feedback
```
User: "The Canvas sync is broken"

Ace: "Oh no! ğŸ˜” Thanks for letting me know. Want me to:
1. ğŸ“ Create a bug report so our team can fix it
2. ğŸ—³ï¸ Add it to public feedback board (other students can vote)
3. ğŸ’¬ Just tell you a workaround for now

(This helps us improve DormWay - you're shaping the product!)"

User: [Selects option 2]

Ace: "Perfect! Can you describe what's happening?
The more detail, the better we can fix it."

User: [Types description]

Ace: "Got it! I'll create a public feedback item:

Title: Canvas sync issues with grade updates
Description: [user description]
Category: Integrations
Type: Bug Report

Other students can vote on this. Want to see it on roadmap?"
```

#### Duplicate Detection
```
User: "Need dark mode"

Ace: "Great minds think alike! 147 other students already
requested dark mode ğŸŒ™

Want me to add your vote? That shows our team it's
super important!

[ğŸ‘ Add My Vote] [See the Request]"
```

#### Context Extraction
```
User: "Syllabus upload is confusing"

Ace: "Thanks for the feedback! Which part was confusing?
â€¢ The upload button
â€¢ File format requirements
â€¢ What happens after upload
â€¢ Something else

(This helps us know exactly what to improve!)"
```

#### Encouragement & Education
```
Ace: "Fun fact: 'Canvas grade sync' was suggested by a
student 3 months ago. It got 89 votes and now we're
building it! ğŸ‰

Your ideas shape DormWay. Every feature exists because
a student asked for it."
```

### Ace Quick Actions

Add to Ace chat widget:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ Chat with Ace           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Quick Actions:             â”‚
â”‚  â€¢ Ask a question           â”‚
â”‚  â€¢ Get study help           â”‚
â”‚  â€¢ ğŸ¤ Share feedback  â† NEW â”‚
â”‚  â€¢ ğŸ“ Report issue    â† NEW â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ace Entry Points

#### 1. Help Menu
```
Dashboard â†’ Help
â”œâ”€â”€ ğŸ’¬ Chat with Ace
â”œâ”€â”€ ğŸ—ºï¸ View Roadmap
â”œâ”€â”€ ğŸ¤ My Feedback (3 active)
â””â”€â”€ ğŸ“š Help Docs
```

#### 2. Contextual Links
On specific pages, add "Report issue" links:
- Schedule page â†’ "Report scheduling issue"
- Canvas sync â†’ "Report sync problem"
- Document upload â†’ "Report upload issue"
- AI features â†’ "Report AI issue"

Clicking opens Ace with pre-filled context

---

## ğŸ¨ UI Components

### VoteButton Component
```tsx
interface VoteButtonProps {
  itemId: string;
  itemType: 'timeline_event' | 'feature_request';
  initialVoteCount: number;
  hasUserVoted: boolean;
  isAuthenticated: boolean;
}

// States:
// - Not voted (gray, outlined)
// - Voted (purple, filled)
// - Hover (scale up)
// - Loading (spinner)
// - Auth required (shows modal)
```

### FeatureRequestCard Component
```tsx
interface FeatureRequestCardProps {
  id: string;
  title: string;
  description: string;
  status: 'in_progress' | 'planned' | 'backlog' | 'completed';
  category: string;
  voteCount: number;
  hasUserVoted: boolean;
  commentCount: number;
  submittedBy: string; // "Student at UC Berkeley"
  createdAt: Date;
  onClick: () => void; // Opens detail view
}
```

### SubmitFeedbackModal Component
```tsx
interface SubmitFeedbackModalProps {
  type?: 'feature_request' | 'bug_report' | 'feedback';
  prefillTitle?: string;
  prefillDescription?: string;
  context?: {
    page: string;
    source: 'ace' | 'dashboard' | 'help_menu';
  };
}
```

### FeedbackDetailModal Component
Shows:
- Full description
- Vote button (sticky)
- Comments section (auth required)
- Status history timeline
- Submitter info
- Admin actions (if admin):
  - Change status
  - Link to Sanity roadmap event
  - Mark as duplicate
  - Reject with reason

---

## ğŸ—„ï¸ Database Schema

### Existing Tables (from migration)

```sql
-- Timeline event votes (roadmap items)
CREATE TABLE timeline_event_votes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES accounts(id) ON DELETE CASCADE,
    sanity_event_id VARCHAR(255) NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT unique_user_event_vote UNIQUE (user_id, sanity_event_id)
);

-- Feature requests
CREATE TABLE feature_requests (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES accounts(id) ON DELETE CASCADE,
    title VARCHAR(255) NOT NULL,
    description TEXT NOT NULL,
    status VARCHAR(50) DEFAULT 'pending',
    category VARCHAR(100),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    reviewed_at TIMESTAMP WITH TIME ZONE,
    reviewed_by UUID REFERENCES accounts(id),
    sanity_event_id VARCHAR(255), -- If promoted to roadmap
    metadata JSONB DEFAULT '{}'::jsonb,
    CONSTRAINT feature_requests_title_min_length CHECK (char_length(title) >= 5),
    CONSTRAINT feature_requests_description_min_length CHECK (char_length(description) >= 20)
);

-- Feature request votes
CREATE TABLE feature_request_votes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES accounts(id) ON DELETE CASCADE,
    feature_request_id UUID NOT NULL REFERENCES feature_requests(id) ON DELETE CASCADE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT unique_user_feature_request_vote UNIQUE (user_id, feature_request_id)
);
```

### Schema Additions Needed

```sql
-- Add source tracking to feature_requests
ALTER TABLE feature_requests
ADD COLUMN source VARCHAR(50) DEFAULT 'web', -- 'web', 'dashboard', 'ace', 'mobile'
ADD COLUMN source_page VARCHAR(255),         -- e.g., '/dashboard/schedule'
ADD COLUMN source_context JSONB DEFAULT '{}'; -- Additional context

-- Add request type
ALTER TABLE feature_requests
ADD COLUMN request_type VARCHAR(50) DEFAULT 'feature_request',
ADD CONSTRAINT feature_requests_type_valid
  CHECK (request_type IN ('feature_request', 'bug_report', 'feedback'));

-- Add comment count cache for performance
ALTER TABLE feature_requests
ADD COLUMN comment_count INTEGER DEFAULT 0;

-- Feature request comments (NEW TABLE)
CREATE TABLE feature_request_comments (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    feature_request_id UUID NOT NULL REFERENCES feature_requests(id) ON DELETE CASCADE,
    user_id UUID NOT NULL REFERENCES accounts(id) ON DELETE CASCADE,
    content TEXT NOT NULL,
    is_official BOOLEAN DEFAULT false, -- Team response
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT comment_min_length CHECK (char_length(content) >= 3)
);

CREATE INDEX idx_feature_request_comments_request_id
  ON feature_request_comments(feature_request_id);
CREATE INDEX idx_feature_request_comments_created_at
  ON feature_request_comments(created_at DESC);

-- User contribution badges (NEW TABLE)
CREATE TABLE user_contribution_badges (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES accounts(id) ON DELETE CASCADE,
    badge_type VARCHAR(50) NOT NULL, -- 'first_feedback', 'trending_idea', etc.
    earned_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    metadata JSONB DEFAULT '{}',
    CONSTRAINT unique_user_badge UNIQUE (user_id, badge_type)
);
```

### Views

```sql
-- Feature requests with enriched data
CREATE OR REPLACE VIEW feature_requests_with_details AS
SELECT
    fr.*,
    COALESCE(v.vote_count, 0) as vote_count,
    v.last_voted_at,
    a.name as submitter_name,
    a.email as submitter_email,
    a.picture_url as submitter_picture,
    CASE
        WHEN ctx.type = 'student' AND ctx.metadata->>'campus_name' IS NOT NULL
        THEN 'Student at ' || (ctx.metadata->>'campus_name')
        ELSE 'DormWay Student'
    END as submitter_display,
    COALESCE(c.comment_count, 0) as actual_comment_count
FROM feature_requests fr
LEFT JOIN (
    SELECT feature_request_id, COUNT(*) as vote_count, MAX(created_at) as last_voted_at
    FROM feature_request_votes
    GROUP BY feature_request_id
) v ON fr.id = v.feature_request_id
LEFT JOIN (
    SELECT feature_request_id, COUNT(*) as comment_count
    FROM feature_request_comments
    GROUP BY feature_request_id
) c ON fr.id = c.feature_request_id
LEFT JOIN accounts a ON fr.user_id = a.id
LEFT JOIN contexts ctx ON ctx.user_id = a.id AND ctx.type = 'student'
ORDER BY vote_count DESC, fr.created_at DESC;
```

---

## ğŸ”Œ API Endpoints

### Feature Requests

```typescript
// List all feature requests (public)
GET /api/feature-requests
Query params:
  - status?: string
  - category?: string
  - sort?: 'votes' | 'recent' | 'oldest'
  - limit?: number
  - offset?: number
Response: {
  data: FeatureRequest[],
  total: number,
  hasMore: boolean
}

// Get single request with details (public)
GET /api/feature-requests/:id
Response: {
  request: FeatureRequest,
  comments: Comment[],
  hasUserVoted: boolean,
  relatedRequests: FeatureRequest[]
}

// Submit new request (auth required)
POST /api/feature-requests
Body: {
  title: string;
  description: string;
  type: 'feature_request' | 'bug_report' | 'feedback';
  category?: string;
  source?: 'web' | 'dashboard' | 'ace';
  sourcePage?: string;
  sourceContext?: object;
}
Response: {
  id: string;
  success: true;
  message: "Your feedback is now live!";
}

// Update own request (auth required, time-limited)
PATCH /api/feature-requests/:id
Body: {
  title?: string;
  description?: string;
  category?: string;
}

// Delete own request (auth required, time-limited)
DELETE /api/feature-requests/:id

// Search for duplicates (public)
GET /api/feature-requests/search
Query: q=dark mode
Response: {
  matches: FeatureRequest[],
  exactMatch: boolean
}
```

### Voting

```typescript
// Vote on feature request (auth required)
POST /api/feature-requests/:id/vote
Response: {
  voted: boolean,
  voteCount: number
}

// Vote on timeline event (auth required)
POST /api/roadmap/:eventId/vote
Response: {
  voted: boolean,
  voteCount: number
}

// Get user's votes (auth required)
GET /api/me/votes
Response: {
  featureRequests: string[],
  timelineEvents: string[]
}

// Get voting stats (auth required)
GET /api/me/voting-stats
Response: {
  totalVotesGiven: number,
  requestsSubmitted: number,
  totalVotesReceived: number,
  badges: Badge[]
}
```

### Comments

```typescript
// Get comments for request (public)
GET /api/feature-requests/:id/comments

// Post comment (auth required)
POST /api/feature-requests/:id/comments
Body: {
  content: string;
}

// Delete own comment (auth required)
DELETE /api/feature-requests/:id/comments/:commentId
```

### Ace Integration

```typescript
// Submit feedback via Ace (auth required)
POST /api/ace/feedback/create
Body: {
  conversationId: string;
  userMessage: string;
  type: 'feature_request' | 'bug_report';
  aceExtractedTitle?: string;
  aceExtractedDescription?: string;
  context?: {
    page: string;
    userAction?: string;
  };
}

// Search for similar requests (helps Ace dedupe)
GET /api/ace/feedback/search?q={query}
Response: {
  matches: Array<{
    id: string;
    title: string;
    voteCount: number;
    status: string;
  }>;
}
```

### Dashboard

```typescript
// Get user's own requests (auth required)
GET /api/dashboard/feedback/my-requests
Response: {
  requests: FeatureRequest[],
  stats: {
    totalSubmitted: number,
    totalVotesReceived: number,
    onRoadmap: number
  }
}

// Get requests user voted on (auth required)
GET /api/dashboard/feedback/my-votes
Response: {
  featureRequests: FeatureRequest[],
  timelineEvents: TimelineEvent[]
}
```

---

## ğŸ® Gamification System

### Badge Types

```typescript
type Badge = {
  id: string;
  type: 'first_feedback' | 'trending_idea' | 'product_shaper' |
        'community_champion' | 'visionary' | 'early_adopter';
  name: string;
  description: string;
  icon: string;
  earnedAt?: Date;
};

const badges = [
  {
    type: 'first_feedback',
    name: 'Voice Heard',
    description: 'Submitted your first feedback',
    icon: 'ğŸŒŸ'
  },
  {
    type: 'trending_idea',
    name: 'Trending Idea',
    description: 'Your request got 10+ votes',
    icon: 'ğŸ”¥'
  },
  {
    type: 'product_shaper',
    name: 'Product Shaper',
    description: 'Your feature was shipped',
    icon: 'ğŸ¯'
  },
  {
    type: 'community_champion',
    name: 'Community Champion',
    description: 'Voted on 10+ requests',
    icon: 'ğŸ‘¥'
  },
  {
    type: 'visionary',
    name: 'Visionary',
    description: 'Your request reached top 5',
    icon: 'ğŸ’¡'
  },
  {
    type: 'early_adopter',
    name: 'Early Adopter',
    description: 'Voted in first week of launch',
    icon: 'ğŸš€'
  }
];
```

### Badge Award Logic

```typescript
// Award badges via triggers or background jobs

// First feedback badge
ON INSERT feature_requests
IF (SELECT COUNT(*) FROM feature_requests WHERE user_id = NEW.user_id) = 1
THEN award_badge(NEW.user_id, 'first_feedback');

// Trending idea badge
ON INSERT feature_request_votes
IF (SELECT COUNT(*) FROM feature_request_votes WHERE feature_request_id = NEW.feature_request_id) >= 10
THEN award_badge((SELECT user_id FROM feature_requests WHERE id = NEW.feature_request_id), 'trending_idea');

// Community champion badge
ON INSERT feature_request_votes
IF (SELECT COUNT(DISTINCT feature_request_id) FROM feature_request_votes WHERE user_id = NEW.user_id) >= 10
THEN award_badge(NEW.user_id, 'community_champion');
```

### Weekly Digest Email

```html
Subject: ğŸ“ This Week in DormWay - Built by You!

Hey {{firstName}}!

Your voice matters:
â€¢ Your "{{request_title}}" got {{new_votes}} new votes this week! ğŸ”¥
â€¢ "{{shipped_feature}}" that you voted on shipped yesterday ğŸ‰
â€¢ {{supporter_count}} students agree with your {{request_title_2}}

This week, students like you:
â€¢ Submitted {{weekly_submissions}} new ideas
â€¢ Cast {{weekly_votes}} votes
â€¢ Got {{weekly_ships}} features shipped âœ¨

Remember: Every feature exists because a student asked for it.

Keep shaping DormWay!
[View My Impact] [Vote on New Ideas]
```

---

## ğŸ“Š Analytics & Metrics

### Key Metrics to Track

**Engagement:**
- Total feature requests submitted
- Total votes cast
- Active voters (last 30 days)
- Submission rate (per day/week)
- Vote rate (per day/week)
- Comment engagement rate

**Quality:**
- Average votes per request
- Time to first vote
- Duplicate request rate
- Admin review time
- Implementation rate (requests â†’ shipped)

**Student Impact:**
- % of features from student requests
- Average time from request to ship
- Top contributors (most voted requests)
- Most active voters

**Ace Integration:**
- % of requests from Ace vs. manual
- Ace duplicate detection accuracy
- Ace categorization accuracy

### Dashboards

**Public Stats** (on /feedback page):
```
ğŸ“Š Student Impact
â”œâ”€â”€ 847 students contributed ideas
â”œâ”€â”€ 12,459 votes cast this month
â”œâ”€â”€ 23 student requests shipped this semester
â””â”€â”€ #1 request: Dark Mode (302 votes)
```

**Admin Dashboard** (internal):
- Request pipeline (pending â†’ review â†’ planned â†’ shipped)
- Vote distribution chart
- Category breakdown
- Source breakdown (Ace vs. manual)
- Top contributors leaderboard
- Sentiment analysis of comments

---

## ğŸš€ Implementation Phases

### Phase 1: Foundation (Current Sprint)
- [x] Database schema migration
- [x] Timeline event voting API
- [ ] Feature request board UI
- [ ] Vote button component
- [ ] Basic Ace integration

### Phase 2: Core Features
- [ ] Submit request modal
- [ ] Feature request detail view
- [ ] Comments system
- [ ] My Feedback dashboard page
- [ ] Auth prompt for public users

### Phase 3: Ace Integration
- [ ] Ace quick actions
- [ ] Duplicate detection in Ace
- [ ] Context extraction in Ace
- [ ] Feedback triage in Ace
- [ ] Encouragement messaging

### Phase 4: Gamification
- [ ] Badge system
- [ ] User contribution stats
- [ ] Weekly digest email
- [ ] Leaderboards (optional)
- [ ] Celebration notifications

### Phase 5: Advanced Features
- [ ] Search & filter improvements
- [ ] Related requests recommendations
- [ ] Status change notifications
- [ ] Request merging (duplicates)
- [ ] Admin workflow tools
- [ ] Public roadmap API

---

## ğŸ¯ Success Criteria

### Quantitative
- **50+ feature requests** submitted in first month
- **500+ votes** cast in first month
- **30%+ of active users** vote on at least one item
- **10%+ of active users** submit feedback
- **80%+ satisfaction** with transparency (survey)

### Qualitative
- Students feel heard and valued
- Clear connection between feedback â†’ roadmap â†’ shipped
- Students recommend DormWay citing "they listen to us"
- Team has clear product direction from student needs
- Reduced support tickets ("when will X be available?")

---

## ğŸ”— Related Documentation

- Sanity Timeline Schema - Roadmap event structure
- [Ace LLM Integration](/docs/engineering/acellm/acellm-api-and-webhooks) - Chatbot capabilities
- [Student Context System](/docs/product/features/context-system/readme) - Campus association
- [Notification System](/docs/product/features/push-notifications) - Real-time updates
- [Dashboard Architecture](/docs/engineering/ios-dashboard-architecture) - Protected routes

---

## ğŸ“ Open Questions

1. **Vote limits?** Should we limit votes per user to prevent gaming?
   - Current decision: No limits, unlimited voting
   - Reasoning: More engagement, students self-regulate

2. **Anonymous submissions?** Allow students to submit anonymously?
   - Current decision: No, requires auth for accountability
   - But display as "Student at [Campus]" not full name

3. **Downvoting?** Allow users to downvote requests?
   - Current decision: No, keep positive
   - Alternative: "Not for me" button for filtering

4. **Request editing?** How long can users edit their submissions?
   - Current decision: 7 days after submission
   - After that, comment to clarify

5. **Merge duplicates?** Should admins be able to merge similar requests?
   - Current decision: Yes, with notification to submitters
   - Votes transfer to merged request

---

## ğŸ¨ Design Assets Needed

- [ ] Vote button states (default, voted, hover, loading)
- [ ] Status badges (in progress, planned, backlog, completed)
- [ ] Badge icons (6 contribution badges)
- [ ] Empty states (no requests, no votes)
- [ ] Celebration animations (feature shipped)
- [ ] Ace avatar variations (feedback mode)

---

## ğŸ§ª Testing Checklist

### Public Access
- [ ] View roadmap without login
- [ ] Browse feature requests without login
- [ ] See vote counts without login
- [ ] Click vote shows auth prompt
- [ ] Click submit shows auth prompt

### Authenticated Voting
- [ ] Vote on feature request
- [ ] Unvote on feature request
- [ ] Vote on timeline event
- [ ] See voted state persisted
- [ ] Vote count updates in real-time

### Submission Flow
- [ ] Submit via form (manual)
- [ ] Submit via Ace conversation
- [ ] Validation errors display
- [ ] Duplicate detection works
- [ ] Success confirmation shows
- [ ] Request appears on board immediately

### My Feedback Page
- [ ] See my submitted requests
- [ ] See requests I voted on
- [ ] Edit my request (within 7 days)
- [ ] Delete my request (within 7 days)
- [ ] See contribution stats
- [ ] See earned badges

### Notifications
- [ ] Status change notification
- [ ] Feature shipped notification
- [ ] Badge earned notification
- [ ] Weekly digest email

---

**Last Updated:** 2025-10-26
**Next Review:** After Phase 1 completion
