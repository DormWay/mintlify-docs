---
title: "API Reference"
description: "Complete API documentation for Growth Ops endpoints"
icon: "code"
---

## Authentication

All Growth Ops endpoints require authentication via Clerk JWT tokens or development headers.

<Tabs>
  <Tab title="Production">
    **Required Header**:
    ```
    Authorization: Bearer {CLERK_JWT_TOKEN}
    ```

    **Role Requirements**:
    - `admin` - Full access to all Growth Ops features
    - `growth_ops` - Read-only access to analytics, limited write access
  </Tab>

  <Tab title="Local Development">
    **Required Headers**:
    ```
    X-User-Id: {user-uuid}
    X-User-Role: admin
    ```

    **Example**:
    ```bash
    curl http://localhost:3001/api/admin/growth/bug-reports \
      -H "X-User-Id: 058d2a14-ab1a-49c0-aa67-0312fd87e342" \
      -H "X-User-Role: admin"
    ```
  </Tab>
</Tabs>

---

## Bug Reports

### List Bug Reports

<CodeGroup>

```bash cURL
GET /api/admin/growth/bug-reports?status=submitted&limit=20&offset=0

curl "http://localhost:3001/api/admin/growth/bug-reports?status=submitted&limit=20" \
  -H "X-User-Role: admin"
```

```typescript TypeScript
const response = await fetch('/api/admin/growth/bug-reports?status=submitted', {
  headers: {
    'Authorization': `Bearer ${clerkToken}`
  }
});
const { bugs } = await response.json();
```

</CodeGroup>

**Query Parameters**:
| Parameter | Type | Description | Default |
|-----------|------|-------------|---------|
| `status` | string | Filter by status: `submitted`, `triaged`, `assigned`, `in_progress`, `resolved`, `closed`, `wont_fix` | - |
| `severity` | string | Filter by severity: `critical`, `high`, `medium`, `low` | - |
| `platform` | string | Filter by platform: `ios`, `web`, `android`, `api`, `other` | - |
| `reporter_id` | UUID | Filter by reporter account ID | - |
| `limit` | integer | Number of results (max 100) | 50 |
| `offset` | integer | Pagination offset | 0 |

**Response**:
```json
{
  "bugs": [
    {
      "id": "bug-uuid",
      "title": "Calendar won't sync",
      "description": "Tried refreshing 3 times...",
      "platform": "ios",
      "severity": "high",
      "status": "submitted",
      "screenshot_url": "https://s3.amazonaws.com/...",
      "reporter_account_id": "user-uuid",
      "reporter_name": "Sarah Chen",
      "reporter_email": "sarah@umich.edu",
      "created_at": "2026-01-15T10:30:00Z",
      "updated_at": "2026-01-15T10:30:00Z"
    }
  ],
  "total": 42,
  "limit": 20,
  "offset": 0
}
```

---

### Get Bug Report Details

```bash
GET /api/admin/growth/bug-reports/:id

curl http://localhost:3001/api/admin/growth/bug-reports/bug-uuid \
  -H "X-User-Role: admin"
```

**Response**:
```json
{
  "id": "bug-uuid",
  "title": "Calendar won't sync",
  "description": "Tried refreshing 3 times, still shows old events...",
  "platform": "ios",
  "severity": "high",
  "status": "submitted",
  "screenshot_url": "https://s3.amazonaws.com/screenshots/bug-uuid.png",
  "reporter_account_id": "user-uuid",
  "reporter": {
    "id": "user-uuid",
    "given_name": "Sarah",
    "family_name": "Chen",
    "email": "sarah@umich.edu"
  },
  "assigned_to": null,
  "resolved_at": null,
  "linear_issue_id": null,
  "notes": null,
  "metadata": {
    "app_version": "1.2.3",
    "ios_version": "17.2",
    "device_model": "iPhone 14 Pro"
  },
  "created_at": "2026-01-15T10:30:00Z",
  "updated_at": "2026-01-15T10:30:00Z"
}
```

---

### Submit Bug Report (Mobile/Web)

```bash
POST /api/mobile/bug-reports

curl -X POST http://localhost:3001/api/mobile/bug-reports \
  -H "Content-Type: multipart/form-data" \
  -H "X-User-Id: user-uuid" \
  -F "title=Calendar won't sync" \
  -F "description=Tried refreshing 3 times..." \
  -F "platform=ios" \
  -F "severity=high" \
  -F "screenshot=@screenshot.png" \
  -F 'metadata={"app_version":"1.2.3","ios_version":"17.2"}'
```

**Request Body** (multipart/form-data):
| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `title` | string | Yes | Bug title (max 200 chars) |
| `description` | string | Yes | Detailed description |
| `platform` | string | Yes | `ios`, `web`, `android`, `api`, `other` |
| `severity` | string | No | Default: `medium` |
| `screenshot` | file | No | Image file (PNG/JPG, max 5MB) |
| `metadata` | JSON | No | Device info, app version, etc. |

**Response**:
```json
{
  "id": "new-bug-uuid",
  "status": "submitted",
  "message": "Bug report submitted successfully. Thank you!"
}
```

---

### Update Bug Status (Admin)

```bash
PATCH /api/admin/growth/bug-reports/:id

curl -X PATCH http://localhost:3001/api/admin/growth/bug-reports/bug-uuid \
  -H "Content-Type: application/json" \
  -H "X-User-Role: admin" \
  -d '{
    "status": "triaged",
    "severity": "critical",
    "assigned_to": "developer-uuid",
    "notes": "Confirmed issue, assigning to iOS team"
  }'
```

**Request Body**:
| Field | Type | Description |
|-------|------|-------------|
| `status` | string | New status |
| `severity` | string | Updated severity |
| `assigned_to` | UUID | Developer assigned |
| `notes` | string | Admin notes (internal) |
| `resolved_at` | ISO 8601 | Mark as resolved (set automatically when status = `resolved`) |

**Response**:
```json
{
  "id": "bug-uuid",
  "status": "triaged",
  "severity": "critical",
  "assigned_to": "developer-uuid",
  "updated_at": "2026-01-15T11:00:00Z"
}
```

---

### Forward to Linear

```bash
POST /api/admin/growth/bug-reports/:id/forward-to-linear

curl -X POST http://localhost:3001/api/admin/growth/bug-reports/bug-uuid/forward-to-linear \
  -H "X-User-Role: admin"
```

**Response**:
```json
{
  "linear_issue_id": "LIN-123",
  "linear_url": "https://linear.app/dormway/issue/LIN-123",
  "message": "Bug forwarded to Linear successfully"
}
```

**What Happens**:
1. Creates Linear issue in DormWayLLC team
2. Sets title: `[Bug Report] {bug.title}`
3. Adds description with bug details + reporter info + screenshot link
4. Applies labels: `bug`, platform label (e.g., `ios`)
5. Sets priority based on severity mapping
6. Saves Linear issue ID in `growth_bug_reports.linear_issue_id`

---

## Labs Program

### List Labs Members

```bash
GET /api/admin/growth/labs/members?status=active

curl "http://localhost:3001/api/admin/growth/labs/members?status=active" \
  -H "X-User-Role: admin"
```

**Query Parameters**:
| Parameter | Type | Description |
|-----------|------|-------------|
| `status` | string | `active`, `inactive`, `probation`, `alumni` |
| `role` | string | `qa_tester`, `content_creator`, `researcher`, `developer` |

**Response**:
```json
{
  "members": [
    {
      "id": "member-uuid",
      "account_id": "user-uuid",
      "given_name": "Miguel",
      "family_name": "Rodriguez",
      "email": "miguel@berkeley.edu",
      "role": "qa_tester",
      "status": "active",
      "hourly_rate_cents": 1500,
      "total_earnings_cents": 12500,
      "total_earnings_display": "$125.00",
      "tasks_completed": 8,
      "onboarded_at": "2025-12-01T00:00:00Z"
    }
  ]
}
```

---

### Create Labs Task

```bash
POST /api/admin/growth/labs/tasks

curl -X POST http://localhost:3001/api/admin/growth/labs/tasks \
  -H "Content-Type: application/json" \
  -H "X-User-Role: admin" \
  -d '{
    "labs_member_id": "member-uuid",
    "task_type": "syllabus_gathering",
    "title": "Gather 10 STEM syllabi from UMich",
    "description": "Focus on Engineering and CS courses for Winter 2026",
    "payout_cents": 3000,
    "week_start": "2026-01-13"
  }'
```

**Request Body**:
| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `labs_member_id` | UUID | Yes | Assigned Labs member |
| `task_type` | string | Yes | `bug_report`, `syllabus_gathering`, `qa_testing`, `user_interview`, `content_creation`, `other` |
| `title` | string | Yes | Task title |
| `description` | string | No | Detailed instructions |
| `payout_cents` | integer | Yes | Payment amount (e.g., 3000 = $30) |
| `week_start` | DATE | No | Week assignment (defaults to current Monday) |

**Response**:
```json
{
  "id": "task-uuid",
  "status": "assigned",
  "message": "Task created and assigned to member"
}
```

---

### Update Task Status

```bash
PATCH /api/admin/growth/labs/tasks/:id

# Member submits deliverable
curl -X PATCH http://localhost:3001/api/mobile/labs/tasks/task-uuid \
  -H "Content-Type: application/json" \
  -H "X-User-Id: member-account-uuid" \
  -d '{
    "status": "submitted",
    "deliverable_url": "https://drive.google.com/folder/xyz"
  }'

# Admin marks complete
curl -X PATCH http://localhost:3001/api/admin/growth/labs/tasks/task-uuid \
  -H "Content-Type: application/json" \
  -H "X-User-Role: admin" \
  -d '{
    "status": "completed",
    "notes": "Great work, all syllabi verified"
  }'
```

**Request Body**:
| Field | Type | Description |
|-------|------|-------------|
| `status` | string | `in_progress`, `submitted`, `completed`, `paid`, `cancelled` |
| `deliverable_url` | string | Link to completed work |
| `notes` | string | Admin notes |

---

## Campus Outreach

### List Outreach Activities

```bash
GET /api/admin/growth/outreach/activities?status=in_progress&campus_id=umich-uuid

curl "http://localhost:3001/api/admin/growth/outreach/activities?status=in_progress" \
  -H "X-User-Role: admin"
```

**Query Parameters**:
| Parameter | Type | Description |
|-----------|------|-------------|
| `status` | string | `planned`, `in_progress`, `completed`, `cancelled` |
| `activity_type` | string | `ambassador_recruitment`, `campus_campaign`, `partnership`, `event`, `social_media`, `other` |
| `campus_id` | UUID | Filter by campus |
| `owner_id` | UUID | Filter by owner (Alex, Lauren, etc.) |

**Response**:
```json
{
  "activities": [
    {
      "id": "activity-uuid",
      "campus_id": "umich-uuid",
      "campus_name": "University of Michigan",
      "activity_type": "ambassador_recruitment",
      "title": "UMich Spring 2026 Ambassador Program",
      "status": "in_progress",
      "owner_id": "lauren-uuid",
      "owner_name": "Lauren Smith",
      "start_date": "2026-01-15",
      "end_date": "2026-02-15",
      "target_signups": 100,
      "actual_signups": 42,
      "conversion_pct": 42.0,
      "created_at": "2026-01-10T00:00:00Z"
    }
  ]
}
```

---

### Create Outreach Activity

```bash
POST /api/admin/growth/outreach/activities

curl -X POST http://localhost:3001/api/admin/growth/outreach/activities \
  -H "Content-Type: application/json" \
  -H "X-User-Role: admin" \
  -d '{
    "campus_id": "umich-uuid",
    "activity_type": "ambassador_recruitment",
    "title": "UMich Spring 2026 Ambassador Program",
    "description": "Recruit 20 ambassadors from key student orgs",
    "owner_id": "lauren-uuid",
    "start_date": "2026-01-15",
    "end_date": "2026-02-15",
    "target_signups": 100
  }'
```

---

### List Outreach Contacts

```bash
GET /api/admin/growth/outreach/contacts?campus_id=umich-uuid&status=engaged

curl "http://localhost:3001/api/admin/growth/outreach/contacts?status=engaged" \
  -H "X-User-Role: admin"
```

**Response**:
```json
{
  "contacts": [
    {
      "id": "contact-uuid",
      "campus_id": "umich-uuid",
      "campus_name": "University of Michigan",
      "name": "Sarah Johnson",
      "role": "student_leader",
      "instagram_handle": "@sarahj_umich",
      "email": "sarahj@umich.edu",
      "status": "engaged",
      "last_contact_date": "2026-01-12",
      "next_followup_date": "2026-01-20",
      "notes": "President of Engineering Student Council, interested in partnership"
    }
  ]
}
```

---

### Create Outreach Contact

```bash
POST /api/admin/growth/outreach/contacts

curl -X POST http://localhost:3001/api/admin/growth/outreach/contacts \
  -H "Content-Type: application/json" \
  -H "X-User-Role: admin" \
  -d '{
    "campus_id": "umich-uuid",
    "name": "Sarah Johnson",
    "role": "student_leader",
    "instagram_handle": "@sarahj_umich",
    "email": "sarahj@umich.edu",
    "status": "prospect",
    "notes": "President of Engineering Student Council, 10k followers",
    "metadata": {
      "major": "Computer Science",
      "graduation_year": 2026
    }
  }'
```

---

## Growth Scoreboard

### Get Current Week Scoreboard

```bash
GET /api/admin/growth/scoreboard/current-week

curl http://localhost:3001/api/admin/growth/scoreboard/current-week \
  -H "X-User-Role: admin"
```

**Response**:
```json
{
  "week_start": "2026-01-13",
  "total_signups": 185,
  "total_wfau": 161,
  "total_day_7_return": 91,
  "overall_d7_return_pct": 56.5,
  "by_source": [
    {
      "source": "ambassadors",
      "signups": 87,
      "wfau": 73,
      "day_7_return": 44,
      "day_7_return_pct": 60.3,
      "platform_split": {
        "ios": 52,
        "web": 28,
        "android": 7
      }
    },
    {
      "source": "campus_outreach",
      "signups": 52,
      "wfau": 49,
      "day_7_return": 28,
      "day_7_return_pct": 57.1,
      "platform_split": {
        "ios": 30,
        "web": 18,
        "android": 4
      }
    }
  ]
}
```

---

### Get Historical Trends

```bash
GET /api/admin/growth/scoreboard/trends?weeks=8&source=ambassadors

curl "http://localhost:3001/api/admin/growth/scoreboard/trends?weeks=8" \
  -H "X-User-Role: admin"
```

**Query Parameters**:
| Parameter | Type | Description | Default |
|-----------|------|-------------|---------|
| `weeks` | integer | Number of weeks to fetch (max 52) | 4 |
| `source` | string | Filter by specific source | - |
| `campus_id` | UUID | Filter by campus | - |

**Response**:
```json
{
  "weeks": [
    {
      "week_start": "2026-01-13",
      "signups": 185,
      "wfau": 161,
      "day_7_return": 91,
      "day_7_return_pct": 56.5
    },
    {
      "week_start": "2026-01-06",
      "signups": 142,
      "wfau": 128,
      "day_7_return": 67,
      "day_7_return_pct": 52.3
    }
  ]
}
```

---

## Error Responses

All endpoints return standard error responses:

**400 Bad Request**:
```json
{
  "error": "Invalid request",
  "message": "Field 'title' is required"
}
```

**401 Unauthorized**:
```json
{
  "error": "Unauthorized",
  "message": "Invalid or missing authentication token"
}
```

**403 Forbidden**:
```json
{
  "error": "Forbidden",
  "message": "Requires admin or growth_ops role"
}
```

**404 Not Found**:
```json
{
  "error": "Not found",
  "message": "Bug report not found"
}
```

**500 Internal Server Error**:
```json
{
  "error": "Internal server error",
  "message": "An unexpected error occurred"
}
```

---

## Rate Limits

<Warning>
  **Production**: 100 requests/minute per API key. Contact engineering to increase limits if needed.
</Warning>

**Headers** (returned with every response):
```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 87
X-RateLimit-Reset: 1673628000
```

---

## Webhooks (Planned)

<Info>
  **Coming Soon**: Webhook support for real-time updates when bugs are resolved, tasks are completed, etc.
</Info>

Planned webhook events:
- `bug_report.created` - New bug submitted
- `bug_report.resolved` - Bug marked as resolved
- `labs_task.completed` - Task completed by member
- `outreach_activity.completed` - Campaign finished
- `scoreboard.weekly_calculated` - Weekly metrics ready

---

## SDK Support

<Info>
  **Planned**: Official TypeScript SDK for Growth Ops API. For now, use standard HTTP clients (fetch, axios).
</Info>

**Example with TypeScript**:
```typescript
import { GrowthOpsClient } from '@dormway/growth-ops-sdk'; // Future

const client = new GrowthOpsClient({
  apiKey: process.env.DORMWAY_API_KEY
});

// List bug reports
const { bugs } = await client.bugReports.list({
  status: 'submitted',
  severity: 'critical'
});

// Create Labs task
const task = await client.labs.createTask({
  memberId: 'member-uuid',
  taskType: 'qa_testing',
  title: 'Test new dashboard features',
  payoutCents: 4000
});
```
