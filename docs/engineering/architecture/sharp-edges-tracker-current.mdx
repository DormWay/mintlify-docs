---
title: "Sharp Edges Tracker (Current)"
description: "This page tracks “sharp edges” discovered during current-state audits/deep dives, plus the canonical fix/issue to resolve each."
---

# Sharp Edges Tracker (Current)

This page tracks “sharp edges” discovered during current-state audits/deep dives, plus the canonical fix/issue to resolve each.

## Tracking Table

| ID | Sharp edge | Impact | Primary area | Status | Linear | Deep dive |
|---|---|---|---|---|---|---|
| SE-001 | `scheduleProcessor` reconciliation can delete `student_time_blocks` from sources it didn’t ingest; drops can block re-import even when not explicit user intent | High | Calendar + enrollments | **Done** | DORM-773 | [Schedule Sources & Precedence (Current)](/docs/engineering/technical/calendar/schedule-sources-precedence-current); [Course Drops: Downstream Effects (Current)](/docs/engineering/technical/calendar/course-drops-downstream-effects); [Canvas Sync, Storage, and UI Surfacing (Current)](/docs/engineering/technical/canvas/canvas-sync-storage-and-ui-surfacing-current) |
| SE-002 | Term ID mismatch across subsystems can hide courses in both dashboard filtering and schedule reconciliation (`current_term_data.id` vs `metadata.term`, and `term_id` columns vs `metadata.term` readers) | High | Term + Canvas + Dashboard | **Done** | [DORM-777](https://linear.app/dormwayllc/issue/DORM-777/unify-term-id-contract-across-engineapi-routercore-to-prevent-term), [DORM-797](https://linear.app/dormwayllc/issue/DORM-797) | [Canvas Term Window & Course Filtering Deep Dive (Current)](/docs/engineering/technical/canvas/canvas-term-window-course-filtering-deep-dive-current); [Term Management & Term Resolution Deep Dive (Current)](/docs/engineering/technical/engine/term-management-term-resolution-deep-dive-current); [Context Model: Hierarchy vs Graph (Current)](/docs/engineering/technical/ai/context/context-model-hierarchy-vs-graph) |
| SE-003 | Canvas term window (`TermResolver`) uses month-based windows rather than `campus_configs.academic_calendar.terms` dates | Medium | Canvas | **Done** | [DORM-776](https://linear.app/dormwayllc/issue/DORM-776/canvas-termresolver-should-use-campus-academic-calendar-dates-campus) | [Canvas Term Window & Course Filtering Deep Dive (Current)](/docs/engineering/technical/canvas/canvas-term-window-course-filtering-deep-dive-current) |
| SE-004 | `term_year` often omitted on enrollment upserts (schedule import / Canvas sync), making term aggregation fuzzy in `@dormway/core` | Medium | Term + Core | **Done** | [DORM-779](https://linear.app/dormwayllc/issue/DORM-779/ensure-enrollment-upserts-consistently-set-term-year-and-align) | [Term Management & Term Resolution Deep Dive (Current)](/docs/engineering/technical/engine/term-management-term-resolution-deep-dive-current) |
| SE-005 | `student_watcher_state.state_data.term_notifications` uses JSON path derived from termId; termId string shape can break/destabilize dedupe | Medium | Term notifications | **Done** | [DORM-778](https://linear.app/dormwayllc/issue/DORM-778/harden-term-notification-dedupe-storage-avoid-dynamic-json-path-issues) | [Term Transition & Smart Notifications Deep Dive (Current)](/docs/engineering/technical/engine/term-transition-smart-notifications-deep-dive-current) |
| SE-006 | `scheduleRemoval` deletes blocks but does not run reconciliation; other sources (e.g. Google) can “come back” until next `scheduleProcessor` | Medium | Calendar | **Done** | [DORM-780](https://linear.app/dormwayllc/issue/DORM-780/post-drop-ux-consistency-scheduleremoval-should-trigger-reconciliation) | [scheduleRemoval Workflow Deep Dive (Current)](/docs/engineering/technical/calendar/scheduleremoval-workflow-deep-dive-current) |
| SE-007 | Manual class meetings previously wrote directly to `student_time_blocks` (`source='manual'`) while schedule import flowed via `time_blocks` → `source='enrolled'`; overlaps could behave inconsistently (fixed by routing manual meetings through `time_blocks` as `manual_course_add`) | Medium | Calendar | **Done** | [DORM-775](https://linear.app/dormwayllc/issue/DORM-775/unify-manual-meeting-blocks-with-reconciliation-pipeline-to-avoid) | [Course Lifecycle (Add-Drop-Swap) Deep Dive (Current)](/docs/engineering/technical/engine/course-lifecycle-add-drop-swap-deep-dive-current); [Schedule Sources & Precedence (Current)](/docs/engineering/technical/calendar/schedule-sources-precedence-current) |
| SE-008 | `/v2/widgets/batch` ETag is unstable because it hashes envelopes including per-request `generatedAt`; client also doesn’t currently send `If-None-Match` | Medium | Dashboard v2 | **Done** | [DORM-784](https://linear.app/dormwayllc/issue/DORM-784/stabilize-v2widgetsbatch-etag-and-enable-client-conditional-requests) | [Dashboard v2 & Widget Strategy (Current)](/docs/engineering/architecture/dashboard-v2-widget-strategy-current) |
| SE-009 | `widgetEnvelope.v2.schema.json` is out of sync with actual V2 widget envelope (`gridHints` + `generatedAt` vs legacy fields/types) | Low | Dashboard v2 | **Done** | [DORM-783](https://linear.app/dormwayllc/issue/DORM-783/align-widgetenvelope-v2-json-schema-with-actual-widgetenvelope) | [Dashboard v2 & Widget Strategy (Current)](/docs/engineering/architecture/dashboard-v2-widget-strategy-current) |
| SE-010 | Real-time invalidation mapping drift: dash-v2 query key `widget-batch-v2` not consistently invalidated on signals; invalidation resources are also out of sync (`feed` emitted server-side but not handled client-side) | Medium | Dashboard v2 | **Done** | [DORM-785](https://linear.app/dormwayllc/issue/DORM-785/unify-real-time-invalidation-mapping-to-include-widget-batch-v2-dash) | [Dashboard v2 & Widget Strategy (Current)](/docs/engineering/architecture/dashboard-v2-widget-strategy-current); [Realtime Invalidation & Update Propagation Deep Dive (Current)](/docs/engineering/technical/realtime/realtime-invalidation-update-propagation-deep-dive-current) |
| SE-011 | `/v2/widgets/schedule` uses UTC “today” boundaries, which can show the wrong local day near midnight for non-UTC users | Medium | Dashboard v2 + Schedule | **Done** | [DORM-782](https://linear.app/dormwayllc/issue/DORM-782/make-v2widgetsschedule-day-boundaries-timezone-aware-avoid-utc-today) | [Dashboard v2 & Widget Strategy (Current)](/docs/engineering/architecture/dashboard-v2-widget-strategy-current) |
| SE-012 | Task surfaces are fragmented (`/api/mobile/tasks` vs `/api/mobile/planner/task-bank` vs `/students/me/tasks`), returning different shapes and sources | Medium | Tasks + Planner + Dashboard | **Done** | [DORM-787](https://linear.app/dormwayllc/issue/DORM-787/unify-task-surfaces-and-contracts-across-mobiletasks-plannertask-bank) | [Tasks, Task Bank, and Planner Block Scheduling Deep Dive (Current)](/docs/engineering/technical/tasks/tasks-task-bank-and-planner-block-scheduling-deep-dive-current); [Tasks-API-V2](/docs/engineering/technical/api/tasks-api-v2) |
| SE-013 | Planner-block deletion semantics are inconsistent: task unschedule hard-deletes `student_time_blocks` while planner delete uses lifecycle status | Low | Tasks + Planner | **Done** | [DORM-788](https://linear.app/dormwayllc/issue/DORM-788/align-planner-block-deletion-semantics-tasks-unschedule-hard-delete-vs) | [Tasks, Task Bank, and Planner Block Scheduling Deep Dive (Current)](/docs/engineering/technical/tasks/tasks-task-bank-and-planner-block-scheduling-deep-dive-current) |
| SE-014 | Ragie webhook → StudentWatcher routing relies on partition naming and acks early; failures can silently skip watcher refresh | Medium | RAG + StudentWatcher | **Done** | [DORM-786](https://linear.app/dormwayllc/issue/DORM-786/harden-ragie-webhook-→-studentwatcher-routing-and-delivery-guarantees) | [Ragie Ingestion, Webhooks, and ACE Query Pipeline Deep Dive (Current)](/docs/engineering/technical/ai/rag/ragie-ingestion-webhooks-and-ace-query-pipeline-deep-dive-current) |
| SE-015 | `ContextGraphService` returns partial context/edge fields and `/contexts/graph` appears to build relationships from node traversals rather than edges, producing misleading graph responses | Medium | Context graph | **Done** | [DORM-789](https://linear.app/dormwayllc/issue/DORM-789/contextgraphservice-returns-partial-rows-contextsgraph-builds-invalid) | [Context Model: Hierarchy vs Graph (Current)](/docs/engineering/technical/ai/context/context-model-hierarchy-vs-graph) |
| SE-016 | iOS Home Feed fetch always sets `refresh=true`, bypassing Redis card pool cache and forcing heavy on-demand regeneration on every load | Medium | Home Feed | **Done** | [DORM-790](https://linear.app/dormwayllc/issue/DORM-790/home-feed-ios-always-sends-refresh=true-bypassing-redis-card-pool) | [Home Feed System Deep Dive (Current)](/docs/engineering/technical/feed/home-feed-system-deep-dive-current) |
| SE-017 | `processed_syllabus_crew` is sometimes written with `user_id=<uploader>` but treated as course-canonical; overlay base selection pulls latest row regardless of `user_id`, so "canonical" can drift by last processor | Medium | Syllabus + RAG + Overlays | **Done** | [DORM-791](https://linear.app/dormwayllc/issue/DORM-791/clarify-canonical-vs-user-scoped-syllabus-storage-processed-syllabus) | [Syllabus Processing & Overlays Deep Dive (Current)](/docs/engineering/technical/syllabus/syllabus-processing-overlays-deep-dive-current) |
| SE-018 | Background `scheduleProcessor` and Canvas sync update `student_time_blocks`, but do not trigger DayPlan/semester summary regeneration; plans can go stale until next explicit regen | Medium | DayPlan + Semester | **Done** | [DORM-792](https://linear.app/dormwayllc/issue/DORM-792/dayplansemester-summary-can-go-stale-after-background) | [DayPlan & Semester Summary Generation Deep Dive (Current)](/docs/engineering/technical/engine/dayplan-semester-summary-generation-deep-dive-current) |
| SE-019 | Canvas realtime channel drift: server publishes `user:<id>:canvas:updates` but clients subscribe to `canvas:{grades|assignments|announcements}` (and sometimes `canvas:updates`) | Medium | Canvas + Realtime | **Done** | [DORM-793](https://linear.app/dormwayllc/issue/DORM-793/unify-canvas-realtime-channels-server-publishes-useridcanvasupdates) | [Realtime Invalidation & Update Propagation Deep Dive (Current)](/docs/engineering/technical/realtime/realtime-invalidation-update-propagation-deep-dive-current); [Canvas Sync, Storage, and UI Surfacing (Current)](/docs/engineering/technical/canvas/canvas-sync-storage-and-ui-surfacing-current) |
| SE-020 | StudentWatcher emits informational events (`dayplan.update`, `dashboard.update`) but does not emit Signal-Based invalidations (`invalidate`) for the query domains those updates affect; LockedIn may show toasts without refetching | Medium | Realtime + DayPlan | **Done** | [DORM-795](https://linear.app/dormwayllc/issue/DORM-795/emit-signal-based-invalidations-when-studentwatcher-regenerates) | [Realtime Invalidation & Update Propagation Deep Dive (Current)](/docs/engineering/technical/realtime/realtime-invalidation-update-propagation-deep-dive-current); [Context Prediction Pipeline Deep Dive (Current)](/docs/engineering/technical/ai/context/context-prediction-pipeline-deep-dive-current) |
| SE-021 | Context prediction responses are stored as `service_data.method='context_prediction_response'` (Ably Relay), but DayPlan’s “recent context” reader consumes `service_data.method='dayplan_context_update'`, so iOS-driven predictions may not influence planning unless server-mode prediction runs | Low | Context + DayPlan | **Done** | [DORM-796](https://linear.app/dormwayllc/issue/DORM-796/unify-context-prediction-storage-so-ios-predictions-influence-dayplan) | [Context Prediction Pipeline Deep Dive (Current)](/docs/engineering/technical/ai/context/context-prediction-pipeline-deep-dive-current) |

## Notes / Conventions

- Items without a Linear issue mean we haven’t opened a dedicated issue yet.
- If we open a new Linear issue, add it to the table and link back to the deep dive that surfaced it.
