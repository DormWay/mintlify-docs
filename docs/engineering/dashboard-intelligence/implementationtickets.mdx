---
title: "IMPLEMENTATION_TICKETS"
description: "Create database migrations for the learning flywheel and insight attribution system."
---

# DormWay Dashboard Intelligence - Implementation Tickets

**Created**: December 8, 2025
**Source**: UNIFIED_DEVELOPMENT_ROADMAP.md

---

## Phase 0: Foundation & Infrastructure

### DORM-F0-1: Database Schema Extensions ‚úÖ COMPLETE
**Priority**: P0 (Blocks everything)
**Estimate**: 3 hours
**Assignee**: Backend
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Create database migrations for the learning flywheel and insight attribution system.

**Tasks**:
- [x] Create migration `20251208_add_insight_tracking.sql` (combined migration)
- [x] Create `insight_attributions` table
- [x] Create `user_insight_preferences` table
- [x] Create `mv_insight_effectiveness` materialized view
- [x] Add indexes for common query patterns
- [x] Add helper functions (`log_insight_interaction`, `get_user_insight_preferences`)

**Acceptance Criteria**:
- ‚úÖ All tables created successfully
- ‚úÖ Indexes exist for `user_id`, `insight_type`, `shown_at`, context GIN
- ‚úÖ Foreign keys properly constrained
- ‚úÖ Default values set correctly

---

### DORM-F0-2: CSS Foundation ‚úÖ COMPLETE
**Priority**: P0 (Blocks Phase 1)
**Estimate**: 2 hours
**Assignee**: Frontend
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Add CSS classes and animations for the widget system.

**Tasks**:
- [x] Add `.widget-surface` base class with glassmorphism
- [x] Add `.widget-surface-accent` variant (purple border for AI-powered)
- [x] Add `.widget-surface-urgent` variant (red border for overdue)
- [x] Add `.widget-surface-success` variant (green border for completed)
- [x] Add `.widget-surface-interactive` (hover transform)
- [x] Add `.widget-inner-card` for nested content
- [x] Add `widget-enter` stagger animation (0-7 indices)
- [x] Add `metric-pop` animation
- [x] Add `urgent-pulse` animation
- [x] Add `check-success` animation
- [x] Add `ai-sparkle` animation
- [x] Add `insight-reveal` animation
- [x] Add `prefers-reduced-motion` media query handling

**File**: `src/app/globals.css` (lines ~2767-2990)

**Acceptance Criteria**:
- ‚úÖ All classes work in dark mode
- ‚úÖ Light mode overrides included
- ‚úÖ Animations are smooth (60fps)
- ‚úÖ Reduced motion preference respected
- ‚úÖ No conflicts with existing styles

---

### DORM-F0-3: TypeScript Types ‚úÖ COMPLETE
**Priority**: P0 (Blocks Phase 2-3)
**Estimate**: 2 hours
**Assignee**: Frontend
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Create TypeScript interfaces for the insight and learning systems.

**Tasks**:
- [x] Create `src/types/insights.ts`
- [x] Add `InsightSource` type ('syllabus' | 'canvas' | 'calendar' | 'pattern' | 'campus')
- [x] Add `InsightConfidence` type ('certain' | 'likely' | 'suggested')
- [x] Add `InsightType` enum (10 insight types)
- [x] Add `InsightWithAttribution` interface (full attribution metadata)
- [x] Add `NextActionInsight` interface (extended with insight fields)
- [x] Add `UserInsightPreferences` interface + `DEFAULT_INSIGHT_PREFERENCES`
- [x] Add `LayoutChangeType`, `WidgetPosition`, `LayoutChangeContext`
- [x] Add `LayoutChangeEvent` interface
- [x] Add `LayoutSuggestionType`, `LayoutSuggestion` interfaces
- [x] Add `LMSType`, `LMSConfig`, `LMSFeature` interfaces
- [x] Add API request/response types
- [x] Add helper functions: `requiresCanvas()`, `isOptInInsight()`, `getSourceLabel()`
- [x] Update existing `NextAction` type in widgets/types.ts with insight fields

**Acceptance Criteria**:
- ‚úÖ All types properly exported
- ‚úÖ No TypeScript errors
- ‚úÖ Types align with database schema
- ‚úÖ JSDoc comments on complex types

---

### DORM-F0-4: API Endpoints ‚úÖ COMPLETE
**Priority**: P0 (Blocks Phase 3)
**Estimate**: 1 hour
**Assignee**: Backend
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Create API endpoints for layout events and insight preferences.

**Tasks**:
- [x] Add `POST /api/v1/layouts/events` for batch event logging (max 100)
- [x] Add `GET /api/v1/insights/preferences` - Get user preferences
- [x] Add `PUT /api/v1/insights/preferences` - Update preferences (upsert)
- [x] Add `POST /api/v1/insights/interaction` for tracking single interaction
- [x] Add `POST /api/v1/insights/batch` for tracking multiple interactions (max 50)
- [x] Add request validation with Zod schemas
- [x] Add auth middleware on all endpoints
- [x] Add rate limiting (50/100 per request)
- [x] Add camelCase <-> snake_case mapping

**Files**:
- `services/api-router/src/routes/insight-routes.ts`
- `services/api-router/src/routes/layout-routes.ts`
- `services/api-router/src/routes/index.ts` (registration)

**Acceptance Criteria**:
- ‚úÖ All endpoints return proper status codes
- ‚úÖ Validation errors return 400 with details
- ‚úÖ Auth required for all endpoints
- ‚úÖ Rate limiting prevents abuse

---

## Phase 1: Visual Polish ‚úÖ COMPLETE

### DORM-F1-1: Widget Surface Styles ‚úÖ COMPLETE
**Priority**: P1
**Estimate**: 3 hours
**Assignee**: Frontend
**Depends On**: DORM-F0-2
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Apply glassmorphic surfaces to all dashboard widgets.

**Tasks**:
- [x] CSS classes `.widget-surface`, `.widget-inner-card` exist in globals.css
- [x] 12 widget files contain `widget-surface` or `widget-inner-card` references
- [x] Consistent application across all widgets
- [x] Test hover states on all widgets
- [x] Test in both light and dark themes

**Widgets Using widget-surface** (verified):
- ActionCTAWidget.tsx ‚úÖ
- AcademicWidget.tsx ‚úÖ
- DayPlanWidget.tsx ‚úÖ
- TasksWidget.tsx ‚úÖ
- QuickLinksWidget.tsx ‚úÖ
- ScheduleWidget.tsx ‚úÖ
- CoursesWidget.tsx ‚úÖ
- StudyWidget.tsx ‚úÖ
- SyllabusWidget.tsx ‚úÖ
- ContextStatusWidget.tsx ‚úÖ
- AttendanceWidget.tsx ‚úÖ
- shared.tsx ‚úÖ

**Acceptance Criteria**:
- ‚úÖ All widgets have consistent glassmorphic background
- ‚úÖ Hover states show elevation change
- ‚úÖ No visual glitches or flickering
- ‚úÖ Works on mobile and desktop

---

### DORM-F1-2: ActionCTAWidget Enhancement ‚úÖ COMPLETE
**Priority**: P1
**Estimate**: 2 hours
**Assignee**: Frontend
**Depends On**: DORM-F0-3
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Update the Next Action widget to display AI insight reasons.

**Tasks**:
- [x] Create `InsightAttribution` component with expandable "Why this?" UI
- [x] Add `INSIGHT_SOURCE_LABELS` mapping (syllabus, canvas, calendar, pattern, campus)
- [x] Add `CONFIDENCE_STYLES` mapping (high, medium, low)
- [x] Add collapsible explanation panel with ChevronDown animation
- [x] Display context factors as chips
- [x] Add source attribution ("From your syllabus", etc.)
- [x] Add confidence badge styling
- [x] Add "Also considered" alternative actions list
- [x] Add compact mode for dense layouts
- [x] Integration in StandardLayout (density >= 2)
- [x] Integration in ExpandedLayout (featured action)
- [x] Add `.animate-insight-reveal` animation usage

**File**: `src/app/dashboard/home-v2/widgets/ActionCTAWidget.tsx`

**Acceptance Criteria**:
- ‚úÖ insightReason displays when available
- ‚úÖ Sparkle icon indicates AI-generated content
- ‚úÖ Graceful fallback when no insight
- ‚úÖ Expandable "Why this?" panel works

---

### DORM-F1-3: TasksWidget Improvements ‚úÖ COMPLETE
**Priority**: P1
**Estimate**: 2 hours
**Assignee**: Frontend
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Enhance the task list with better visual hierarchy.

**Tasks**:
- [x] Add urgency-based styling (red=overdue, pink=today, amber=tomorrow)
- [x] Use `--ds-widget-danger-bg/border` for overdue tasks
- [x] Use `--ds-widget-urgent-bg/border` for today's tasks
- [x] Use `--ds-widget-warning-bg/border` for tomorrow's tasks
- [x] Add `.urgent-pulse` animation on overdue items
- [x] Add course badge with color tinting (15% opacity background)
- [x] Add due date badge with urgency colors
- [x] Add hover checkmark overlay (Circle ‚Üí CheckCircle on hover)
- [x] Add "OVERDUE" and "DUE TODAY" badges on TaskCard
- [x] Apply to both TaskRow and TaskCard components

**File**: `src/app/dashboard/home-v2/widgets/TasksWidget.tsx`

**Acceptance Criteria**:
- ‚úÖ Overdue tasks have urgent border
- ‚úÖ Course badges have subtle color background
- ‚úÖ Due dates show as colored badges
- ‚úÖ Hover reveals completion action

---

### DORM-F1-4: Schedule Widget Polish ‚úÖ MOSTLY COMPLETE
**Priority**: P2
**Estimate**: 1.5 hours
**Assignee**: Frontend
**Status**: ‚úÖ Mostly Complete (2025-12-08) - some items deferred

**Description**:
Polish the schedule widget with delightful empty states.

**Tasks**:
- [x] Add delightful context-aware empty state
- [x] Weekend detection ("It's the weekend!")
- [x] Morning detection ("Morning free")
- [x] Evening detection ("You're done for today")
- [x] Add `.check-success` animation on empty state icon
- [x] Success-themed styling (green checkmark)
- [ ] **DEFERRED**: Attendance graded indicator (requires syllabus data flow)
- [ ] **DEFERRED**: Professor office hours display (future feature)

**File**: `src/app/dashboard/home-v2/widgets/ScheduleWidget.tsx`

**Acceptance Criteria**:
- ‚úÖ Empty state feels positive, not broken
- ‚úÖ Context-aware messages (weekend, morning, evening)
- ‚è∏Ô∏è Attendance warnings (deferred - needs syllabus integration)

---

### DORM-F1-5: Micro-Animations ‚úÖ COMPLETE
**Priority**: P2
**Estimate**: 1.5 hours
**Assignee**: Frontend
**Depends On**: DORM-F0-2
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Add subtle animations to the dashboard.

**Tasks**:
- [x] Apply stagger animation (`widget-enter`) to widget grid
- [x] Add `--widget-index` CSS property set per widget (capped at 7)
- [x] Apply `urgent-pulse` to overdue TaskRow/TaskCard items
- [x] Apply `check-success` to ScheduleWidget empty state
- [x] Add group hover state for checkmark reveal in TasksWidget
- [ ] **OPTIONAL**: `metric-pop` for MetricCard values (low priority)

**Files**:
- `src/app/dashboard/home-v2/page.tsx` (widget grid)
- `src/app/dashboard/home-v2/widgets/TasksWidget.tsx`

**Acceptance Criteria**:
- ‚úÖ Animations complete in < 300ms total
- ‚úÖ No layout shifts during animation
- ‚úÖ Respects prefers-reduced-motion
- ‚úÖ Feels snappy, not sluggish

---

## Phase 2: AI Insights Layer üü° PARTIAL (~70%)

### DORM-F2-1: Syllabus Insight Extraction üü° PARTIAL
**Priority**: P1
**Estimate**: 4 hours
**Assignee**: AI/Backend
**Status**: üü° Partial - Schema exists, extraction needs enhancement

**Description**:
Enhance syllabus extraction to generate insight reasons.

**Tasks**:
- [x] Database schema for insight storage
- [x] Syllabus data structure supports attendance_policy
- [x] BFF reads attendance_policy from syllabus data
- [ ] Update syllabus-claude-extractor.ts prompt for more insights
- [ ] Extract `late_penalty_info` string
- [ ] Extract `professor_style` object
- [ ] Store insights in `syllabus_analysis` table (enhanced)
- [ ] Add tests for insight extraction

**Files**:
- `services/dormway-crews/crews/syllabus_processor/`
- `services/engine/src/activities/syllabus.activities.ts`

**Acceptance Criteria**:
- ‚è∏Ô∏è 80%+ of syllabi generate valid insights (needs prompt enhancement)
- ‚úÖ Insights are human-readable
- ‚úÖ No PII in insight strings
- ‚úÖ Backward compatible with existing data

---

### DORM-F2-2: Dashboard BFF Insight Integration ‚úÖ COMPLETE
**Priority**: P1
**Estimate**: 2 hours
**Assignee**: Backend
**Depends On**: DORM-F2-1
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Update Dashboard BFF to include insight data.

**Tasks**:
- [x] Create `generateInsightAttribution()` function for NextAction
- [x] Query syllabus data for course-specific insights
- [x] Add `insightReason` to NextAction response
- [x] Add `insightConfidence` field
- [x] Add `insightSource` field (syllabus, canvas, calendar, pattern, campus)
- [x] Add `insightSourceDetail` field
- [x] Add `contextFactors` array
- [x] Add `alternativeActions` array (other upcoming items)
- [x] Add attendance policy detection from syllabus data
- [x] Add participation weight detection
- [x] Add time-based context factors ("Starting soon", "Scheduled for today")
- [x] Add location context factor
- [x] Also updated `generatePerfectTiming()` with insight fields

**File**: `services/api-router/src/services/dashboard-composite-transformer.ts`

**Acceptance Criteria**:
- ‚úÖ NextAction includes insightReason when available
- ‚úÖ Cache invalidates when insights update
- ‚úÖ Response time < 200ms
- ‚úÖ Backward compatible API

---

### DORM-F2-3: Canvas Grade Insights
**Priority**: P2
**Estimate**: 4 hours
**Assignee**: Backend
**Depends On**: Canvas integration

**Description**:
Build grade trend detection from Canvas data.

**Tasks**:
- [ ] Query Canvas submission history
- [ ] Detect grade decline pattern (3+ trending down)
- [ ] Detect missing submission pattern
- [ ] Detect late submission pattern
- [ ] Generate insight strings
- [ ] Add opt-in check before showing

**Acceptance Criteria**:
- Only shows for Canvas-connected users
- Insights are encouraging, not judgmental
- Pattern detection is accurate
- Opt-out respected

---

### DORM-F2-4: Insight Attribution UI ‚úÖ COMPLETE
**Priority**: P1
**Estimate**: 2 hours
**Assignee**: Frontend
**Depends On**: DORM-F2-2
**Status**: ‚úÖ Complete (2025-12-08)

**Description**:
Build UI for displaying insight attributions.

**Tasks**:
- [x] Create `InsightAttribution` component in ActionCTAWidget
- [x] Show source on expand ("From your syllabus", etc.)
- [x] Add confidence indicators (high, medium, low)
- [x] Add expandable "Why this?" panel
- [x] Dismiss functionality UI (needs backend wiring)
- [ ] "Don't show this type" preference (backend wiring pending)
- [ ] Log interactions via API (hook pending)

**Acceptance Criteria**:
- ‚úÖ Attribution visible on expand
- ‚è∏Ô∏è Dismiss works and persists (UI ready, backend wiring pending)
- ‚è∏Ô∏è Preference changes saved (UI ready, backend wiring pending)
- ‚úÖ Accessible (keyboard, screen reader)

---

## Phase 3: Learning Flywheel üü° PARTIAL (~60%)

### DORM-F3-1: Layout Event Logging ‚úÖ COMPLETE
**Priority**: P1
**Estimate**: 3 hours
**Assignee**: Frontend
**Depends On**: DORM-F0-1, DORM-F0-4
**Status**: ‚úÖ Backend + Hook Complete, Integration Pending (2025-12-08)

**Description**:
Log all layout changes for pattern learning.

**Tasks**:
- [x] Create `useLayoutTracking` hook (frontend)
- [x] Create `POST /api/v1/layouts/events` endpoint (backend)
- [x] Rate limiting (100 events per request)
- [x] Context capture (day, hour, campus, tab, device)
- [x] Event types: widget_move, widget_resize, widget_add, widget_remove, layout_reset
- [x] Client-side event buffer with batching
- [x] Debounced server sync (configurable, default 2s)
- [x] Max batch size before immediate flush (default 20)
- [x] `handleLayoutChange()` for react-grid-layout integration
- [x] `initializeLayout()` for setting initial state
- [x] Individual trackers: `trackWidgetMove`, `trackWidgetResize`, etc.
- [x] Automatic device type detection (desktop/tablet/mobile)
- [x] Unmount flush for pending events
- [ ] **PENDING**: Wire `useLayoutTracking` into `page.tsx` ResponsiveGridLayout

**Files**:
- `services/api-router/src/routes/layout-routes.ts` (backend)
- `src/hooks/useLayoutTracking.ts` (frontend)

**Acceptance Criteria**:
- ‚úÖ All layout changes can be logged
- ‚úÖ Context captured accurately
- ‚úÖ No noticeable performance impact
- ‚úÖ Events synced within 2-5 seconds
- ‚è∏Ô∏è Integration into page.tsx pending

---

### DORM-F3-2: Insight Interaction Tracking üü° BACKEND ONLY
**Priority**: P2
**Estimate**: 2 hours
**Assignee**: Frontend
**Depends On**: DORM-F0-4
**Status**: üü° Backend Complete, Frontend Hook Missing (2025-12-08)

**Description**:
Track how users interact with insights.

**Tasks**:
- [x] `POST /api/v1/insights/interaction` endpoint
- [x] `POST /api/v1/insights/batch` endpoint
- [x] `log_insight_interaction()` database function
- [ ] Frontend hook for logging impressions (`useInsightTracking`)
- [ ] Integration with InsightAttribution component
- [ ] Debounced impression logging
- [ ] Offline queueing

**Acceptance Criteria**:
- ‚úÖ Backend endpoints ready
- ‚è∏Ô∏è Frontend hook not created yet
- ‚è∏Ô∏è Integration pending

---

### DORM-F3-3: Analytics Views üü° PARTIAL
**Priority**: P2
**Estimate**: 3 hours
**Assignee**: Backend
**Depends On**: DORM-F3-1
**Status**: üü° Partial (2025-12-08)

**Description**:
Build analytics queries for pattern detection.

**Tasks**:
- [x] Create `mv_insight_effectiveness` materialized view (insight performance)
- [ ] Create materialized view for widget move frequency
- [ ] Create view for time-of-day patterns
- [ ] Create view for day-of-week patterns
- [ ] Create view for user preference profiles
- [ ] Add indexes for query performance
- [ ] Add nightly refresh job

**Acceptance Criteria**:
- ‚è∏Ô∏è Queries return < 100ms (partial)
- ‚è∏Ô∏è Views refresh nightly (not set up yet)
- ‚úÖ Data aggregated properly
- ‚úÖ Privacy preserved (no cross-user queries)

---

## Phase 4: University Intelligence

### DORM-F4-1: LMS Detection Service
**Priority**: P2
**Estimate**: 3 hours
**Assignee**: Backend

**Description**:
Detect university LMS from email domain.

**Tasks**:
- [ ] Create detectUniversityLMS function
- [ ] Query campus_configs by email domain
- [ ] Return LMS type and features
- [ ] Handle unknown universities
- [ ] Cache results per domain

**Acceptance Criteria**:
- Accurate detection for known universities
- Graceful fallback for unknown
- Cache hit rate > 90%

---

### DORM-F4-2: First-User LMS Discovery
**Priority**: P2
**Estimate**: 2 hours
**Assignee**: Backend
**Depends On**: DORM-F4-1

**Description**:
Record LMS when first user from university connects.

**Tasks**:
- [ ] Hook into Canvas OAuth flow
- [ ] Check if campus already has LMS recorded
- [ ] Record LMS discovery if first user
- [ ] Log discovery event
- [ ] Notify admin (optional)

**Acceptance Criteria**:
- First user recorded as pioneer
- Subsequent users benefit from detection
- No duplicate recordings

---

### DORM-F4-3: Smart Onboarding Flows
**Priority**: P2
**Estimate**: 3 hours
**Assignee**: Frontend
**Depends On**: DORM-F4-1

**Description**:
Show appropriate onboarding based on university.

**Tasks**:
- [ ] Create Canvas connection prompt
- [ ] Create syllabus upload prompt
- [ ] Create manual entry prompt
- [ ] Show appropriate prompt based on LMS detection
- [ ] Handle "maybe later" flow
- [ ] Track onboarding completion

**Acceptance Criteria**:
- Correct prompt shown for each case
- Users can skip and return later
- Completion tracked for analytics

---

## Phase 5: Advanced Personalization

### DORM-F5-1: Pattern Detection Service
**Priority**: P3
**Estimate**: 4 hours
**Assignee**: Backend
**Depends On**: DORM-F3-3

**Description**:
Detect user patterns from layout events.

**Tasks**:
- [ ] Create PatternDetectionService
- [ ] Detect time-of-day patterns
- [ ] Detect day-of-week patterns
- [ ] Detect widget size preferences
- [ ] Store detected patterns
- [ ] Run as nightly batch job

**Acceptance Criteria**:
- Patterns detected after 2 weeks of data
- 70%+ pattern confidence threshold
- Job completes < 1 hour for 10k users

---

### DORM-F5-2: Layout Suggestions
**Priority**: P3
**Estimate**: 4 hours
**Assignee**: Frontend + Backend
**Depends On**: DORM-F5-1

**Description**:
Suggest layout changes based on patterns.

**Tasks**:
- [ ] Create LayoutSuggestionService
- [ ] Generate suggestions from patterns
- [ ] Create suggestion toast UI
- [ ] Implement apply action
- [ ] Implement dismiss action
- [ ] Implement "don't suggest" action
- [ ] Track suggestion acceptance rate

**Acceptance Criteria**:
- Suggestions feel helpful, not intrusive
- Easy to dismiss
- Preferences remembered
- Acceptance rate > 30%

---

### DORM-F5-3: Auto-Personalization
**Priority**: P3
**Estimate**: 4 hours
**Assignee**: Full Stack
**Depends On**: DORM-F5-2

**Description**:
Automatically apply layouts based on context.

**Tasks**:
- [ ] Create "Smart Layouts" setting
- [ ] Implement auto-switch logic
- [ ] Show "Layout adjusted" indicator
- [ ] Implement quick revert
- [ ] Track auto-change acceptance
- [ ] Allow per-pattern opt-out

**Acceptance Criteria**:
- Opt-in only
- Clear indication when auto-changed
- Easy to revert
- Revert rate < 20%

---

## Ticket Dependencies Graph

```
DORM-F0-1 (DB Schema)
    ‚Üì
DORM-F0-4 (API Endpoints)
    ‚Üì
DORM-F3-1 (Layout Event Logging) ‚Üí DORM-F3-3 (Analytics) ‚Üí DORM-F5-1 (Pattern Detection)
                                                                    ‚Üì
                                                              DORM-F5-2 (Suggestions)
                                                                    ‚Üì
                                                              DORM-F5-3 (Auto-Personalization)

DORM-F0-2 (CSS Foundation)
    ‚Üì
DORM-F1-1 (Widget Surfaces) ‚Üí DORM-F1-2 to DORM-F1-5 (All visual polish)

DORM-F0-3 (TypeScript Types)
    ‚Üì
DORM-F1-2 (ActionCTA Enhancement)
    ‚Üì
DORM-F2-2 (BFF Integration)

DORM-F2-1 (Syllabus Insights)
    ‚Üì
DORM-F2-2 (BFF Integration) ‚Üí DORM-F2-4 (Attribution UI)

DORM-F4-1 (LMS Detection)
    ‚Üì
DORM-F4-2 (First-User Discovery)
    ‚Üì
DORM-F4-3 (Smart Onboarding)
```

---

## Sprint Planning Suggestion

### Sprint 1 (Week 1-2): Foundation + Visual
- DORM-F0-1: Database Schema (3h)
- DORM-F0-2: CSS Foundation (2h)
- DORM-F0-3: TypeScript Types (2h)
- DORM-F0-4: API Endpoints (1h)
- DORM-F1-1: Widget Surfaces (3h)
- DORM-F1-2: ActionCTA Enhancement (2h)

**Total**: 13 hours

### Sprint 2 (Week 3-4): AI Insights
- DORM-F1-3: Tasks Widget (2h)
- DORM-F1-4: Schedule Widget (1.5h)
- DORM-F1-5: Micro-Animations (1.5h)
- DORM-F2-1: Syllabus Insights (4h)
- DORM-F2-2: BFF Integration (2h)
- DORM-F2-4: Attribution UI (2h)

**Total**: 13 hours

### Sprint 3 (Week 5-6): Learning Flywheel
- DORM-F3-1: Layout Event Logging (3h)
- DORM-F3-2: Insight Interaction Tracking (2h)
- DORM-F3-3: Analytics Views (3h)
- DORM-F2-3: Canvas Grade Insights (4h)

**Total**: 12 hours

### Sprint 4 (Week 7-8): University Intelligence
- DORM-F4-1: LMS Detection (3h)
- DORM-F4-2: First-User Discovery (2h)
- DORM-F4-3: Smart Onboarding (3h)

**Total**: 8 hours

### Sprint 5-6 (Week 9-12): Personalization
- DORM-F5-1: Pattern Detection (4h)
- DORM-F5-2: Layout Suggestions (4h)
- DORM-F5-3: Auto-Personalization (4h)

**Total**: 12 hours

---

## Phase 6: "Operating System" Navigation Paradigm

### DORM-F6-1: Focus Panel Infrastructure
**Priority**: P2
**Estimate**: 6 hours
**Assignee**: Frontend

**Description**:
Build the core focus panel system for Level 2 navigation.

**Tasks**:
- [ ] Create `FocusedEntity` type definition
- [ ] Create `useFocusPanel` context hook
- [ ] Create `FocusPanel` component shell
- [ ] Update dashboard layout to support grid + panel
- [ ] Implement desktop side-by-side layout (60/40)
- [ ] Implement mobile bottom sheet layout
- [ ] Add slide-in/out animations
- [ ] Add "Back to Dashboard" navigation

**Files**:
- `src/contexts/FocusPanelContext.tsx` (new)
- `src/components/focus-panel/FocusPanel.tsx` (new)
- `src/app/dashboard/home-v2/page.tsx`
- `src/app/globals.css`

**Acceptance Criteria**:
- Focus panel slides in from right on desktop
- Focus panel slides up from bottom on mobile
- Dashboard grid shrinks gracefully when panel opens
- Back button closes panel and returns to full grid
- Panel state persists through widget interactions

---

### DORM-F6-2: Course Detail Panel
**Priority**: P2
**Estimate**: 4 hours
**Assignee**: Frontend
**Depends On**: DORM-F6-1

**Description**:
Build the comprehensive course "cockpit" panel.

**Tasks**:
- [ ] Create `CourseDetailPanel` component
- [ ] Add Overview tab (health metrics, upcoming work, weekly schedule)
- [ ] Add Workload tab (hours/week chart, due date distribution)
- [ ] Add Performance tab (grade trend placeholder)
- [ ] Add Policies tab (attendance, late, grading breakdown)
- [ ] Wire up real course data from composite API
- [ ] Add "Plan Study Block" action
- [ ] Add "Open in Canvas" action

**Files**:
- `src/components/focus-panel/CourseDetailPanel.tsx` (new)
- `src/components/focus-panel/tabs/CourseOverviewTab.tsx` (new)
- `src/components/focus-panel/tabs/CourseWorkloadTab.tsx` (new)
- `src/components/focus-panel/tabs/CoursePoliciesTab.tsx` (new)

**Acceptance Criteria**:
- Shows all course info in one place
- Tab navigation is smooth
- Real data displays correctly
- Actions work (Canvas link, study block)
- Attendance policy surfaces if available

---

### DORM-F6-3: Assignment Detail Panel
**Priority**: P2
**Estimate**: 2 hours
**Assignee**: Frontend
**Depends On**: DORM-F6-1

**Description**:
Build the assignment detail panel for Level 2 assignment navigation.

**Tasks**:
- [ ] Create `AssignmentDetailPanel` component
- [ ] Display due date with countdown
- [ ] Show assignment weight/grade impact
- [ ] Show requirements from syllabus
- [ ] Add AI insight reason (time estimate)
- [ ] Add "Suggested Study Blocks" section
- [ ] Add "Open in Canvas" action
- [ ] Add "Mark Complete" action

**Files**:
- `src/components/focus-panel/AssignmentDetailPanel.tsx` (new)

**Acceptance Criteria**:
- Countdown timer works correctly
- Grade impact is clear
- Study block suggestions appear
- Actions function properly
- Breadcrumb shows Course ‚Üí Assignment path

---

### DORM-F6-4: Widget Focus Integration
**Priority**: P2
**Estimate**: 4 hours
**Assignee**: Frontend
**Depends On**: DORM-F6-1, DORM-F6-2, DORM-F6-3

**Description**:
Wire up existing widgets to open focus panels.

**Tasks**:
- [ ] Add `onCourseFocus` prop to CoursesWidget
- [ ] Add `onAssignmentFocus` prop to AcademicWidget
- [ ] Add `onEventFocus` prop to DayPlanWidget
- [ ] Update dashboard page to pass focus callbacks
- [ ] Ensure deep linking works (e.g., clicking assignment in course panel)
- [ ] Add visual affordance for clickable items
- [ ] Track focus panel opens in analytics

**Files**:
- `src/app/dashboard/home-v2/widgets/CoursesWidget.tsx`
- `src/app/dashboard/home-v2/widgets/AcademicWidget.tsx`
- `src/app/dashboard/home-v2/widgets/DayPlanWidget.tsx`
- `src/app/dashboard/home-v2/page.tsx`

**Acceptance Criteria**:
- Clicking course opens course panel
- Clicking assignment opens assignment panel
- Panel-to-panel navigation works (course ‚Üí assignment)
- No loss of dashboard context during navigation
- Navigation is tracked for learning flywheel

---

### DORM-F6-5: Event Detail Panel
**Priority**: P3
**Estimate**: 2 hours
**Assignee**: Frontend
**Depends On**: DORM-F6-1

**Description**:
Build the event detail panel for calendar events.

**Tasks**:
- [ ] Create `EventDetailPanel` component
- [ ] Show event title, time, location
- [ ] Show walking directions/time if applicable
- [ ] Show course association if class event
- [ ] Add "Add to Calendar" action
- [ ] Add location map preview

**Files**:
- `src/components/focus-panel/EventDetailPanel.tsx` (new)

**Acceptance Criteria**:
- All event details visible
- Walking advice displays for class events
- Calendar integration works
- Course link opens course panel

---

## Updated Ticket Dependencies Graph

```
PHASE 0-5 (existing)
    ‚Üì
DORM-F6-1 (Focus Panel Infrastructure)
    ‚Üì
    ‚îú‚îÄ‚îÄ DORM-F6-2 (Course Detail Panel)
    ‚îÇ       ‚Üì
    ‚îú‚îÄ‚îÄ DORM-F6-3 (Assignment Detail Panel)
    ‚îÇ       ‚Üì
    ‚îî‚îÄ‚îÄ DORM-F6-5 (Event Detail Panel)
            ‚Üì
        DORM-F6-4 (Widget Focus Integration)
```

---

## Updated Sprint Planning

### Sprint 6 (Week 11-12): OS Navigation Paradigm
- DORM-F6-1: Focus Panel Infrastructure (6h)
- DORM-F6-2: Course Detail Panel (4h)
- DORM-F6-3: Assignment Detail Panel (2h)
- DORM-F6-4: Widget Focus Integration (4h)

**Total**: 16 hours

### Optional Sprint 7 (Week 13):
- DORM-F6-5: Event Detail Panel (2h)
- Polish and bug fixes (4h)
- User testing feedback iteration (6h)

**Total**: 12 hours

---

*Tickets should be created in Linear with appropriate labels, dependencies, and estimates.*
