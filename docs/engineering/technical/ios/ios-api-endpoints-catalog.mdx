---
title: "iOS API Endpoints Catalog"
description: "This document catalogs all API endpoints used in the iOS app and tracks their migration status to the new API Gateway."
---

# iOS API Endpoints Catalog

## Overview
This document catalogs all API endpoints used in the iOS app and tracks their migration status to the new API Gateway.

## Current API Configuration

### Base URLs
- **Development (Simulator)**: `http://127.0.0.1:3001`
- **Development (Device)**: `http://<your-mac-lan-ip>:3001` (matches Info.plist `API_BASE_URL`)
- **Production**: `https://bp67gdk1c5.execute-api.us-east-1.amazonaws.com` (AWS API Gateway v2)
- **Supabase (legacy)**: `https://api.dormway.app` ‚Äî Deprecated (auth only)

### Auth0 Configuration
- **Audience**: `https://api2.dormway.app` (configured in Auth0Service)

## API Endpoints by Service

### 1. Authentication & Real-time
- `POST /v1/realtime/ably-auth` - Get Ably token (AblyService) ‚úÖ **WORKING**
  - Used for real-time messaging authentication
  - Requires JWT Bearer token
- `POST /mobile/ably-auth` - **[404 - NOT USED IN iOS APP]**

### 2. User Profile & Preferences
- `GET /v1/mobile/profile` - Get user profile (UserProfileService) ‚úÖ **WORKING**
- `POST /v1/mobile/profile/{userId}/update` - Update user profile
- `GET /v1/mobile/preferences` - Get preferences (PreferencesAPI) ‚úÖ **WORKING**
- `POST /v1/mobile/preferences` - Create preferences
- `PUT /v1/mobile/preferences` - Update preferences
- `DELETE /v1/mobile/preferences` - Delete preferences
- `GET /mobile/complete-profile` - **[404 - NOT USED IN iOS APP]**
- `GET /mobile/profile-checklist` - **[404 - NOT USED IN iOS APP]**
- `GET /v1/mobile/users/current` - Get current user data **[404 - NEEDS IMPLEMENTATION]**
- `POST /v1/mobile/users/current/device` - Register device token **[404 - NOT NEEDED - CustomerIO handles this]**
- `POST /v1/mobile/users/current/feedback` - Submit user feedback **[404 - NEEDS IMPLEMENTATION]**

### 3. Calendar Services
- `POST /v1/mobile/calendar/canvas-url` - Save Canvas calendar URL (ICSCalendarService)
- `POST /v1/mobile/calendar/import-schedule` - Import schedule
- `POST /v1/mobile/calendar/upload-courses` - Upload courses (with file)
- `POST /v1/mobile/calendar/upload-ics` - Upload ICS file
- `POST /v1/mobile/claim-ics` - Claim ICS upload
- `GET /v1/mobile/check-ics-status` - Check ICS status
- `POST /v1/mobile/calendar/preferences/bulk` - Bulk update calendar preferences
- `POST /v1/mobile/calendar/preferences` - Update calendar preferences

### 4. BrainGains (AI Assistant)
- `GET /v1/braingains/query` - Query documents (BrainGainsService)
- `GET /v1/braingains/documents` - List documents
- `POST /v1/braingains/documents` - Upload document (DocumentUploadService)
- `GET /v1/braingains/documents/{id}` - Get document
- `DELETE /v1/braingains/documents/{id}` - Delete document
- `POST /v1/braingains/chat` - Create chat
- `GET /v1/braingains/chat` - List chats
- `GET /v1/braingains/chat/{chatId}` - Get chat
- `DELETE /v1/braingains/chat/{chatId}` - Delete chat
- `POST /v1/braingains/chat/{chatId}` - Send message

### 5. Widget Data Endpoints
- `GET /dashboard/v1/composite` - Dashboard BFF v1 (ETag + realtime) ‚úÖ **WORKING**
- `GET /test/dashboard/stats` - Dashboard stats ‚úÖ **WORKING**
- `GET /mobile/widgets/summary` - Widget summary **[404 - NOT IMPLEMENTED]**
- `GET /mobile/widgets/available` - Available widgets **[404 - NOT IMPLEMENTED]**
- `GET /v1/mobile/weather` - Weather widget data (WeatherWidget)
- `GET /v1/mobile/academic` - Academic widget data (AcademicWidget)
- `GET /v1/mobile/schedule` - Schedule widget data (ScheduleWidget)
- `GET /v1/mobile/dining` - Dining widget data (DiningWidget)
- `GET /v1/mobile/campus` - Campus widget data (CampusWidget)
- `GET /v1/mobile/assignments` - Assignments widget data (AssignmentsWidget)
- `GET /v1/mobile/context` - Context status widget data (ContextStatusWidget)
- `GET /v1/mobile/weekly` - Weekly widget data (WeeklyWidget)
- `GET /v1/mobile/widgets` - Widget configurations (WidgetService - NOT IMPLEMENTED)

### 6. Context & Location Services
- `GET /v1/mobile/contexts/building` - Get building context (UserContextService)
- `GET /v1/mobile/users/{userId}/contexts` - Get user contexts
- `PUT /v1/mobile/contexts/{contextId}` - Update context
- `POST /v1/mobile/contexts/student` - Student context
- `POST /v1/mobile/contexts/building` - Building context
- `POST /v1/ai/predict-context` - Predict context (ContextService) ‚úÖ **WORKING (requires proper request body)**
- `GET /v1/mobile/contexts` - Get all contexts **[404 - NOT IMPLEMENTED]**

### 7. AI & Intelligence Services
- `POST /v1/ai/context` - Process context (AI context service) **[404 - NOT IMPLEMENTED]**
- `GET /v1/ai/insights` - Get AI insights **[404 - NOT IMPLEMENTED]**
- `POST /v1/ai/feedback` - Submit AI feedback **[404 - NOT IMPLEMENTED]**
- `POST /v1/ai/predict` - Predict user needs **[404 - NOT IMPLEMENTED]**

### 8. Temporal Workflow Management
- `POST /v1/temporal/workflow/start` - Start workflow (TemporalService)
- `POST /v1/temporal/workflow/{workflowId}/query` - Query workflow
- `POST /v1/temporal/workflow/{workflowId}/signal` - Signal workflow
- `POST /v1/temporal/workflow/{workflowId}/terminate` - Terminate workflow
- `GET /v1/temporal/workflow/{workflowId}` - Get workflow info

### 9. App Configuration
- `GET /v1/mobile/app-conf` - Get app configuration (CampusDataService) ‚úÖ **WORKING**
- `GET /v1/mobile/app-conf/campus` - Get campus data **[404 - USE /v1/mobile/app-conf instead]**
- `GET /v1/mobile/app-conf/majors` - Get majors data ‚úÖ **WORKING**
- `GET /v1/mobile/app-conf/majors/umich` - Get UMich majors (MajorsDataService) **[404 - USE /v1/mobile/app-conf/majors instead]**

### 10. Telemetry & Analytics
- `POST /v1/mobile/telemetry/background` - Send telemetry (TelemetryService)

### 11. Widget-specific Endpoints (Legacy)
- `GET /v1/ace/study-command/{userId}` - Study command (WidgetDataProvider) **[MISSING IN BACKEND]**
- `GET /v1/context/next-action/{userId}` - Next action (WidgetDataProvider) **[MISSING IN BACKEND]**

### 12. ACE (Academic Excellence) Endpoints
- `GET /v1/ace/recommendations` - Get ACE recommendations **[MISSING IN BACKEND]**
- `POST /v1/ace/goals` - Set academic goals **[MISSING IN BACKEND]**
- `GET /v1/ace/progress` - Get academic progress **[MISSING IN BACKEND]**
- `POST /v1/ace/track` - Track academic activity **[MISSING IN BACKEND]**

### 13. Planned/Missing Endpoints
- `GET /v1/widgets` - Widget schema
- `GET /v1/widgets/context/{contextId}` - Context widgets
- `GET /v1/widgets/user/{userId}` - User widgets
- `GET /v1/widgets/schema` - Widget schema
- `POST /v1/widgets/analytics` - Widget analytics
- `POST /v1/widgets/feedback` - Widget feedback

### 14. Google Calendar (TODO - Refactor)
- Currently using Supabase RPC calls:
  - `store_google_calendar_token` ‚Üí Should be `POST /v1/calendar/google/auth`
  - `check_google_calendar_sync_status` ‚Üí Should be `GET /v1/calendar/google/status`
  - `fetch_google_calendar_events` ‚Üí Should be `GET /v1/calendar/google/events`

## Migration Status

### ‚úÖ Ready (Using NetworkService)
- All BrainGains endpoints
- User profile endpoints
- Calendar services
- Temporal workflows
- App configuration
- Telemetry

### ‚ö†Ô∏è Needs Testing with Auth0
- Widget data endpoints (need Auth0 JWT)
- Context services
- Ably authentication

### ‚ùå Needs Implementation
- Widget configuration endpoints (`/v1/mobile/widgets`)
- Google Calendar API endpoints (currently using Supabase RPC)

## ‚úÖ API URL Updates Completed (2025-09-05)

### 1. Base URL Updates
```swift
// Info.plist - Production
API_BASE_URL = "https://bp67gdk1c5.execute-api.us-east-1.amazonaws.com" ‚úÖ Updated

// WidgetDataProvider.swift - Dynamic loading
private static let apiBaseURL = getAPIBaseURL() ‚úÖ Updated
// Now reads from Info.plist with fallback to production URL
```

### 2. Hardcoded URL Removals
- ‚úÖ `CalendarSelectionManager.swift` - Now uses `Bundle.main.configuration.apiBaseURL`
- ‚úÖ `BrainGainsChatView.swift` - Updated to `https://api2.dormway.app`
- ‚úÖ `BrainGainsChatHistoryView.swift` - Updated to `https://api2.dormway.app`
- ‚úÖ `APIConfig.swift` - Updated all environments to use new gateway URLs

### 3. Auth0 Audience
- ‚úÖ Audience remains `https://api2.dormway.app` in Auth0Service (Auth0 API identifier)
- ‚úÖ Production base URL uses AWS API Gateway v2 domain above

### 4. Campus Onboarding (iOS)
- 1) `GET /api/mobile/campus/typeahead?q=<search>` ‚Üí pick campus (use returned `id`)
- 2) `GET /api/campus/{uuid}/metadata` ‚Üí seeds campus context + returns config
- Optional: `GET /api/campus/by-code/{code}/metadata` (accepts slugs like `umich` and resolves to UUID)

## Notes
- All endpoints require JWT authentication except `/v1/mobile/app-conf` (public)
- Widget endpoints return data in a standardized format for widget rendering
- Context endpoints are used for location-based features
- Telemetry is sent in batches for efficiency

## üö® Missing Endpoints Summary (Updated 2025-08-02)

The following endpoints are called by the iOS app but return 401 errors because they're not implemented in the backend:

### High Priority (Core Functionality)
1. **App Configuration**
   - `GET /v1/mobile/app-conf` - Essential for app initialization

2. **User Management**
   - `GET /v1/mobile/users/{userId}` - Basic user data
   - `POST /v1/mobile/users/{userId}/device` - Push notification setup
   - `POST /v1/mobile/users/{userId}/feedback` - User feedback

3. **Context & AI**
   - `POST /v1/ai/predict-context` - Context prediction
   - `GET /v1/mobile/contexts` - All contexts
   - `POST /v1/ai/context` - Process context
   - `GET /v1/ai/insights` - AI insights
   - `POST /v1/ai/feedback` - AI feedback
   - `POST /v1/ai/predict` - Predict user needs

4. **ACE Features**
   - `GET /v1/ace/study-command/{userId}` - Study recommendations
   - `GET /v1/context/next-action/{userId}` - Next action suggestions
   - `GET /v1/ace/recommendations` - ACE recommendations
   - `POST /v1/ace/goals` - Academic goals
   - `GET /v1/ace/progress` - Academic progress
   - `POST /v1/ace/track` - Activity tracking

### Total Missing Endpoints: 16
