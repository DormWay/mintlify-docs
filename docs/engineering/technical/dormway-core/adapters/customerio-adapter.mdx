---
title: "CustomerIO Adapter"
description: "import { getCustomerIOAdapter } from '@dormway/core/adapters/customerio';"
---

# CustomerIO Adapter

## Overview

**CustomerIO Adapter** provides Customer.io integration for transactional emails, push notifications, and user messaging.

**Purpose**: Centralized messaging for onboarding emails, notifications, and user communication.

**Location**: `@dormway/core/adapters/customerio`

---

## Installation

```typescript
import { getCustomerIOAdapter } from '@dormway/core/adapters/customerio';

const customerio = getCustomerIOAdapter();
```

---

## Configuration

**Environment variables**:
- `CUSTOMERIO_API_KEY` - Customer.io API key
- `CUSTOMERIO_SITE_ID` - Customer.io site ID

---

## Methods

### identify

Identify or update a customer.

**Signature**:
```typescript
identify(userId: string, attributes: Record<string, any>): Promise<void>
```

**Example**:
```typescript
await customerio.identify('user-123', {
  email: 'student@umich.edu',
  name: 'Alice Johnson',
  campus: 'University of Michigan',
  created_at: Math.floor(Date.now() / 1000),
});
```

---

### track

Track an event for a customer.

**Signature**:
```typescript
track(userId: string, eventName: string, data?: Record<string, any>): Promise<void>
```

**Example**:
```typescript
await customerio.track('user-123', 'dayplan_generated', {
  date: '2025-11-23',
  itemCount: 12,
});
```

---

### sendEmail

Send transactional email.

**Signature**:
```typescript
sendEmail(userId: string, templateId: string, data?: Record<string, any>): Promise<void>
```

**Example**:
```typescript
await customerio.sendEmail('user-123', 'welcome-email', {
  firstName: 'Alice',
  campusName: 'University of Michigan',
});
```

---

### sendPush

Send push notification.

**Signature**:
```typescript
sendPush(userId: string, message: string, data?: Record<string, any>): Promise<void>
```

**Example**:
```typescript
await customerio.sendPush('user-123', 'Your dayplan is ready!', {
  type: 'dayplan',
  date: '2025-11-23',
});
```

---

## Common Patterns

### Pattern 1: User Registration

```typescript
async function onUserRegistered(user: User) {
  await customerio.identify(user.id, {
    email: user.email,
    name: user.name,
    campus: user.campus.name,
    created_at: Math.floor(user.createdAt.getTime() / 1000),
  });

  await customerio.track(user.id, 'user_registered');
}
```

---

### Pattern 2: Send Welcome Email

```typescript
async function sendWelcomeEmail(userId: string, userName: string) {
  await customerio.sendEmail(userId, 'welcome-email', {
    firstName: userName.split(' ')[0],
    dashboardUrl: 'https://app.dormway.com/dashboard',
  });
}
```

---

## Best Practices

### ✅ Do
- **Identify users** on signup/login
- **Track meaningful events**
- **Use templates** for emails
- **Include unsubscribe links**
- **Test messages** before production

### ❌ Don't
- **Don't spam users** with notifications
- **Don't expose API keys**
- **Don't send PII** in tracking events
- **Don't skip error handling**

---

**Last Updated**: 2025-11-23
**Maintainer**: Platform Team
