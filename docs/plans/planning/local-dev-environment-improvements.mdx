---
title: "Local Dev Environment Improvements"
description: "This proposal outlines improvements to the DormWay local development environment, including:"
---

# Local Dev Environment Improvements Proposal

**Status**: ğŸ“‹ Proposal
**Priority**: High
**Effort**: Medium (2-3 weeks)
**Impact**: High - Significantly improves developer experience

---

## Executive Summary

This proposal outlines improvements to the DormWay local development environment, including:

1. **Web-based Dev Dashboard** (NEW) - Visual service management at `localhost:9999`
2. **Unified CLI Tool** - Single `dw` command for all operations
3. **Automated Environment Validation** - Pre-flight checks before starting services
4. **Enhanced Debugging Tools** - Better logging, error messages, and diagnostics
5. **Developer Onboarding Automation** - One-command setup for new developers

**Key Benefits**:
- â±ï¸ **Faster onboarding**: New devs productive in under 30 minutes (vs 2-3 hours currently)
- ğŸ› **Easier debugging**: Visual service health + smart error messages
- ğŸš€ **Improved productivity**: Fewer context switches, less manual work
- ğŸ“Š **Better visibility**: Real-time service status, logs, and metrics

---

## 1. Web-Based Dev Dashboard (Priority: HIGH)

### Overview

Create a web interface at **`http://localhost:9999`** that provides visual service management, similar to Docker Desktop but DormWay-specific.

### Features

#### 1.1 Service Management Panel

**Visual Grid of All Services**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DormWay Local Dev Dashboard                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Refresh] [Stop All] [Restart All] [Settings]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ğŸŸ¢ api-router    â”‚  â”‚ ğŸŸ¢ engine        â”‚            â”‚
â”‚  â”‚ Port: 3001       â”‚  â”‚ Port: 3030       â”‚            â”‚
â”‚  â”‚ CPU: 12%         â”‚  â”‚ CPU: 8%          â”‚            â”‚
â”‚  â”‚ MEM: 156 MB      â”‚  â”‚ MEM: 245 MB      â”‚            â”‚
â”‚  â”‚ [Logs] [Restart] â”‚  â”‚ [Logs] [Restart] â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ğŸŸ¢ dormway-      â”‚  â”‚ ğŸ”´ zuplo         â”‚            â”‚
â”‚  â”‚    lockedin      â”‚  â”‚ Port: 9000       â”‚            â”‚
â”‚  â”‚ Port: 3008       â”‚  â”‚ Error: Port busy â”‚            â”‚
â”‚  â”‚ CPU: 5%          â”‚  â”‚ [View Error]     â”‚            â”‚
â”‚  â”‚ [Logs] [Restart] â”‚  â”‚ [Start] [Config] â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ğŸŸ¢ postgres      â”‚  â”‚ ğŸŸ¢ redis         â”‚            â”‚
â”‚  â”‚ Port: 5432       â”‚  â”‚ Port: 6379       â”‚            â”‚
â”‚  â”‚ Connections: 12  â”‚  â”‚ Keys: 1,234      â”‚            â”‚
â”‚  â”‚ [Query] [Schema] â”‚  â”‚ [CLI] [Monitor]  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Service Status Indicators**:
- ğŸŸ¢ Green: Running healthy
- ğŸŸ¡ Yellow: Starting/Warning
- ğŸ”´ Red: Stopped/Error
- âš« Gray: Not installed/Disabled

#### 1.2 Real-Time Logs Viewer

**Integrated Log Streaming**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service Logs: api-router                     [X Close] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Pause] [Clear] [Download] [Filter: ___] [Level: ALLâ–¾]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  13:45:23 INFO  Server started on port 3001             â”‚
â”‚  13:45:24 DEBUG Connected to PostgreSQL                 â”‚
â”‚  13:45:25 INFO  Dashboard endpoint called               â”‚
â”‚  13:45:25 ERROR Failed to fetch weather data            â”‚
â”‚  â”‚  at fetchWeather (weather.ts:42)                     â”‚
â”‚  â”‚  Error: Network timeout                              â”‚
â”‚  13:45:26 WARN  Retry attempt 1/3                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Auto-scroll: [âœ“] Follow tail                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features**:
- Color-coded log levels (red=error, yellow=warn, blue=info, gray=debug)
- Search/filter by keyword or regex
- Auto-scroll toggle
- Download logs as file
- Multi-service log aggregation view

#### 1.3 Database Inspector

**Quick Database Operations**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database: dormway                            [X Close] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Query] [Schema] [Migrations] [Backup] [Restore]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Quick Actions:                                          â”‚
â”‚  â€¢ Check accounts table                [Run]            â”‚
â”‚  â€¢ View recent contexts                [Run]            â”‚
â”‚  â€¢ Check service_data partitions       [Run]            â”‚
â”‚  â€¢ Inspect user locations (PostGIS)    [Run]            â”‚
â”‚                                                          â”‚
â”‚  Schema Quick Reference:                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Table      â”‚ Key Columns                      â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ accounts   â”‚ id, email, clerk_id              â”‚      â”‚
â”‚  â”‚ contexts   â”‚ id, type, parent_id, user_id     â”‚      â”‚
â”‚  â”‚ locations  â”‚ id, location (PostGIS), type     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                          â”‚
â”‚  Custom Query:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ SELECT * FROM accounts LIMIT 5;                â”‚     â”‚
â”‚  â”‚                                                 â”‚     â”‚
â”‚  â”‚                                                 â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  [Run Query] [Format SQL] [Clear]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.4 Environment Variables Manager

**Visual Doppler Config**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Environment: dev_ethan                       [X Close] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Switch Configâ–¾] [Sync from Doppler] [Export]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Search: [___________]  [Show Secrets: â˜]              â”‚
â”‚                                                          â”‚
â”‚  Clerk Configuration                         [Expand â–¾] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY                  â”‚ â”‚
â”‚  â”‚ pk_test_aHVtb3Jvd... [Copy] [View]                 â”‚ â”‚
â”‚  â”‚ Status: âœ“ Valid                                     â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚ CLERK_SECRET_KEY                                    â”‚ â”‚
â”‚  â”‚ sk_test_â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢  [Copy] [View]                    â”‚ â”‚
â”‚  â”‚ Status: âœ“ Valid                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  Database Configuration                      [Expand â–¾] â”‚
â”‚                                                          â”‚
â”‚  API Configuration                           [Expand â–¾] â”‚
â”‚                                                          â”‚
â”‚  âš ï¸ Missing Variables (2):                              â”‚
â”‚  â€¢ SENTRY_AUTH_TOKEN (optional)                         â”‚
â”‚  â€¢ DEMO_ACCOUNT_REFRESH_TOKEN (optional)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.5 API Test Harness

**Quick API Testing**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Tester                                   [X Close] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Endpoint: [GET â–¾] [/dashboard/v1/composite     ]       â”‚
â”‚                                                          â”‚
â”‚  Query Params:                                           â”‚
â”‚  â€¢ tab:     [home  ]                                    â”‚
â”‚  â€¢ context: [campus]                                    â”‚
â”‚  â€¢ refresh: [â˜ true]                                    â”‚
â”‚                                                          â”‚
â”‚  Headers:                                                â”‚
â”‚  â€¢ x-user-id: [test-user        ]                       â”‚
â”‚  â€¢ x-user-role: [admin          ]                       â”‚
â”‚                                                          â”‚
â”‚  [Send Request] [Save as Template]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Response (156ms):                                       â”‚
â”‚  Status: 200 OK                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ {                                                   â”‚ â”‚
â”‚  â”‚   "widgets": [...],                                 â”‚ â”‚
â”‚  â”‚   "schedule": [...],                                â”‚ â”‚
â”‚  â”‚   "metadata": {                                     â”‚ â”‚
â”‚  â”‚     "fetchedAt": "2025-10-29T..."                   â”‚ â”‚
â”‚  â”‚   }                                                 â”‚ â”‚
â”‚  â”‚ }                                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  [Copy] [Format JSON] [Save Response]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Saved Request Templates**:
- Campus detection test
- Dashboard BFF (all tabs)
- Mobile profile endpoint
- Create assignment
- Trigger workflow

#### 1.6 Diagnostics Center

**Automated Health Checks**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  System Diagnostics                           [X Close] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Run All Checks] [Export Report]                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Environment Setup                                  âœ“    â”‚
â”‚  â”œâ”€ Doppler configured                           âœ“    â”‚
â”‚  â”œâ”€ Docker running                               âœ“    â”‚
â”‚  â”œâ”€ Node.js v18+                                 âœ“    â”‚
â”‚  â””â”€ Git repository                               âœ“    â”‚
â”‚                                                          â”‚
â”‚  Service Health                                     âš ï¸    â”‚
â”‚  â”œâ”€ API Router (3001)                            âœ“    â”‚
â”‚  â”œâ”€ Engine (3030)                                âœ“    â”‚
â”‚  â”œâ”€ LockedIn (3008)                              âœ“    â”‚
â”‚  â”œâ”€ Zuplo Gateway (9000)                         âœ—    â”‚
â”‚  â”‚   â””â”€ Error: Port 9000 already in use               â”‚
â”‚  â”‚       [Kill Process] [Change Port]                  â”‚
â”‚  â””â”€ PostgreSQL (5432)                            âœ“    â”‚
â”‚                                                          â”‚
â”‚  Clerk Integration                                  âœ“    â”‚
â”‚  â”œâ”€ Publishable key present                      âœ“    â”‚
â”‚  â”œâ”€ Secret key present                           âœ“    â”‚
â”‚  â”œâ”€ JWKS endpoint reachable                      âœ“    â”‚
â”‚  â””â”€ LockedIn configured                          âœ“    â”‚
â”‚                                                          â”‚
â”‚  Database Schema                                    âœ“    â”‚
â”‚  â”œâ”€ Migrations up to date                        âœ“    â”‚
â”‚  â”œâ”€ Required tables exist                        âœ“    â”‚
â”‚  â””â”€ PostGIS extension enabled                    âœ“    â”‚
â”‚                                                          â”‚
â”‚  Network & Ports                                    âš ï¸    â”‚
â”‚  â”œâ”€ Port 3001: Available                         âœ“    â”‚
â”‚  â”œâ”€ Port 3008: Available                         âœ“    â”‚
â”‚  â”œâ”€ Port 9000: In use                            âœ—    â”‚
â”‚  â””â”€ Port 5432: Available                         âœ“    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Technical Implementation

**Tech Stack**:
- **Frontend**: React + Vite (fast dev server)
- **Backend**: Express.js micro-service (separate from main stack)
- **Real-time**: WebSockets for log streaming
- **Docker Integration**: Docker SDK for Node.js
- **Port**: 9999 (dev dashboard)

**Project Structure**:
```
services/dev-dashboard/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ServiceCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LogViewer.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseInspector.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ApiTester.tsx
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Services.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Logs.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Diagnostics.tsx
â”‚   â”‚   â””â”€â”€ App.tsx
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ services.ts    # Service management
â”‚   â”‚   â”‚   â”œâ”€â”€ logs.ts        # Log streaming
â”‚   â”‚   â”‚   â”œâ”€â”€ database.ts    # DB operations
â”‚   â”‚   â”‚   â””â”€â”€ diagnostics.ts # Health checks
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ shared/
â”‚       â””â”€â”€ types.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ README.md
```

**API Endpoints** (Backend at `http://localhost:9999/api`):
```typescript
GET    /api/services              # List all services with status
POST   /api/services/:id/start    # Start a service
POST   /api/services/:id/stop     # Stop a service
POST   /api/services/:id/restart  # Restart a service
GET    /api/services/:id/logs     # Get logs (SSE)
GET    /api/diagnostics           # Run health checks
POST   /api/database/query        # Execute SQL query
GET    /api/database/schema/:table # Get table schema
GET    /api/env                   # List env variables
POST   /api/env/validate          # Validate env vars
```

**WebSocket Events**:
```typescript
// Client â†’ Server
subscribe_logs: { serviceId: string }
unsubscribe_logs: { serviceId: string }

// Server â†’ Client
log_entry: { serviceId: string, level: string, message: string, timestamp: string }
service_status: { serviceId: string, status: 'running' | 'stopped' | 'error' }
```

---

## 2. Unified CLI Tool: `dw`

### Overview

Replace scattered `make` commands and scripts with a single, intuitive CLI tool.

### Installation

```bash
# Install globally via npm
npm install -g @dormway/dev-cli

# Or use via npx (no install)
npx @dormway/dev-cli <command>

# Alias in .bashrc/.zshrc
alias dw="npx @dormway/dev-cli"
```

### Command Structure

```bash
dw [command] [subcommand] [options]
```

### Commands

#### 2.1 Project Setup

```bash
# Initialize new dev environment
dw init
  â†’ Checks system requirements
  â†’ Clones missing repos (dormway-api-2, obsidian-vault)
  â†’ Installs Doppler CLI
  â†’ Runs doppler login + setup
  â†’ Installs npm dependencies
  â†’ Seeds dev database
  â†’ Opens dev dashboard

# Quick health check
dw doctor
  â†’ Runs full diagnostics
  â†’ Reports issues with fixes
  â†’ Validates all env vars
```

#### 2.2 Service Management

```bash
# Start services
dw start                    # Start all services
dw start api lockedin      # Start specific services
dw start --build           # Force rebuild

# Stop services
dw stop                    # Stop all
dw stop api                # Stop specific

# Restart services
dw restart api             # Smart restart (detects changes)
dw restart api --force     # Force recreate container

# Service status
dw status                  # Show all services
dw status api              # Detailed status for one service

# Service logs
dw logs                    # All services (aggregated)
dw logs api                # Specific service
dw logs api -f             # Follow mode
dw logs --since 1h         # Last hour
```

**Smart Restart Detection**:
```typescript
// Automatically detects what changed and uses optimal restart method
if (codeChangedOnly) {
  // Just restart container (volumes auto-update)
  docker restart service
} else if (packageJsonChanged) {
  // Rebuild with new deps
  docker-compose build --no-cache service
} else if (envVarsChanged) {
  // Recreate container
  docker-compose up -d --force-recreate service
} else if (temporalWorkflowChanged) {
  // Run both builds
  npm run build && npm run build:workflow
  docker restart service
}
```

#### 2.3 Database Operations

```bash
# Database access
dw db                      # Connect to psql
dw db schema accounts      # Show table schema (no docker exec!)
dw db query "SELECT..."    # Run query
dw db migrate              # Run migrations
dw db migrate --dry        # Preview migrations
dw db reset                # Reset database
dw db seed                 # Seed dev data
dw db backup               # Create backup
dw db restore [file]       # Restore from backup
dw db sync                 # Sync from production (VPN required)

# Schema shortcuts
dw db accounts             # SELECT * FROM accounts LIMIT 10
dw db contexts --type=campus  # Filter contexts
```

#### 2.4 Documentation

```bash
# Search Obsidian vault
dw docs "clerk setup"      # Search vault
dw docs --path ios/*       # Search in ios folder
dw docs --tag architecture # Search by tag

# Open docs
dw docs open               # Open vault in Obsidian
dw docs index              # Rebuild search index
```

#### 2.5 Testing & Debugging

```bash
# Run tests
dw test                    # All tests
dw test api                # Service-specific tests
dw test smoke              # Smoke tests

# API testing
dw api get /health         # Test endpoint
dw api post /users --data '{"email":"test@example.com"}'
dw api test campus-detection  # Run saved test

# Debugging
dw debug api               # Attach debugger to service
dw debug --port 9229       # Custom debug port
```

#### 2.6 Environment Management

```bash
# Doppler integration
dw env                     # Show current config
dw env list                # List all configs
dw env switch dev_riley    # Switch config
dw env get CLERK_KEY       # Get specific variable
dw env set KEY=value       # Set variable
dw env validate            # Validate all required vars
dw env export > .env       # Export to .env file (for non-Docker use)
```

#### 2.7 Workflow Helpers

```bash
# Common workflows
dw workflow trigger student-watcher --user-id=123
dw workflow list           # List running workflows
dw workflow cancel <id>    # Cancel workflow

# Git helpers
dw git branch              # Show current branch + status
dw git fresh               # New branch from main
dw git sync                # Pull latest + rebase

# Deployment
dw deploy --service=api --env=staging
dw deploy check            # Check deployment status
```

### Example Workflows

**New Developer Onboarding**:
```bash
# One command to rule them all
dw init

# Output:
# âœ“ Checking system requirements...
#   âœ“ Docker Desktop running
#   âœ“ Node.js 18.x installed
#   âœ“ Git configured
# âœ“ Cloning repositories...
#   âœ“ dormway-api-2
#   âœ“ obsidian-vault
# âœ“ Setting up Doppler...
#   â†’ Please login to Doppler (browser opened)
#   âœ“ Configured dormway/dev_yourname
# âœ“ Installing dependencies...
#   âœ“ api-router
#   âœ“ engine
#   âœ“ dormway-lockedin
# âœ“ Starting services...
#   âœ“ postgres-local
#   âœ“ redis-local
#   âœ“ api-router
#   âœ“ engine
# âœ“ Seeding database...
#   âœ“ Dev accounts created
#   âœ“ Sample contexts loaded
# âœ“ Running diagnostics...
#   âœ“ All checks passed
#
# ğŸ‰ Setup complete! Opening dev dashboard at http://localhost:9999
```

**Daily Development**:
```bash
# Morning - start work
dw start

# Check what's running
dw status

# Make code changes...

# Restart service to test
dw restart api

# Check logs
dw logs api -f

# Test API endpoint
dw api get /dashboard/v1/composite?tab=home

# Everything looks good, commit
git add . && git commit -m "feat: add new endpoint"

# End of day - stop services
dw stop
```

**Debugging an Issue**:
```bash
# Health check
dw doctor

# Output:
# âŒ 2 issues found:
#   1. Zuplo Gateway not responding (port 9000)
#      Fix: Run `dw restart zuplo`
#   2. Missing CLERK_SECRET_KEY in Doppler
#      Fix: Run `dw env set CLERK_SECRET_KEY=sk_test_...`

# Apply fixes
dw env set CLERK_SECRET_KEY=sk_test_xxx
dw restart zuplo

# Verify
dw doctor
# âœ“ All checks passed
```

### CLI Implementation

**Tech Stack**:
- **Framework**: Commander.js (CLI framework)
- **Styling**: Chalk (colors), Ora (spinners), Inquirer (prompts)
- **Docker**: Dockerode (Docker SDK)
- **Config**: Cosmiconfig (rc files)

**Project Structure**:
```
packages/dev-cli/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”œâ”€â”€ init.ts
â”‚   â”‚   â”œâ”€â”€ start.ts
â”‚   â”‚   â”œâ”€â”€ db.ts
â”‚   â”‚   â”œâ”€â”€ docs.ts
â”‚   â”‚   â””â”€â”€ env.ts
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ docker.ts      # Docker operations
â”‚   â”‚   â”œâ”€â”€ doppler.ts     # Doppler integration
â”‚   â”‚   â”œâ”€â”€ diagnostics.ts # Health checks
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ services.json  # Service definitions
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ dw.js              # Entry point
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

**Service Configuration** (`config/services.json`):
```json
{
  "services": [
    {
      "id": "api-router",
      "name": "API Router",
      "aliases": ["api", "router"],
      "port": 3001,
      "healthEndpoint": "/health",
      "dependencies": ["postgres", "redis"],
      "restartStrategy": "smart",
      "logPath": "/var/log/api-router.log"
    },
    {
      "id": "dormway-lockedin",
      "aliases": ["lockedin", "web"],
      "port": 3008,
      "envPrefix": "NEXT_PUBLIC_",
      "buildCommand": "npm run build",
      "dependencies": ["api-router"]
    }
  ]
}
```

---

## 3. Enhanced Developer Experience Features

### 3.1 Pre-Flight Validation

**Before Starting Services**:
```bash
dw start
  â†’ Checking prerequisites...
    âœ“ Docker running
    âœ“ Doppler configured
    âœ“ Required env vars present
    âœ“ No port conflicts
    âœ“ Disk space available (>10GB)
  â†’ Starting services...
```

**Validation Rules**:
```typescript
interface ValidationRule {
  name: string;
  check: () => boolean | Promise<boolean>;
  fix?: () => void | Promise<void>;
  severity: 'error' | 'warning';
  message: string;
  fixMessage?: string;
}

const rules: ValidationRule[] = [
  {
    name: 'Docker Desktop',
    check: () => isDockerRunning(),
    severity: 'error',
    message: 'Docker Desktop is not running',
    fixMessage: 'Please start Docker Desktop'
  },
  {
    name: 'Doppler Auth',
    check: () => isDopplerAuthenticated(),
    fix: () => exec('doppler login'),
    severity: 'error',
    message: 'Not logged into Doppler',
    fixMessage: 'Run: dw env login'
  },
  {
    name: 'Port 3001',
    check: () => isPortAvailable(3001),
    fix: () => killProcessOnPort(3001),
    severity: 'error',
    message: 'Port 3001 already in use',
    fixMessage: 'Kill process? [Y/n]'
  }
];
```

### 3.2 Smart Error Messages

**Before** (Current):
```
Error: connect ECONNREFUSED 127.0.0.1:5432
```

**After** (Improved):
```
âŒ Cannot connect to PostgreSQL

Cause: Database not running on port 5432

Possible fixes:
  1. Start PostgreSQL: dw start postgres
  2. Check if port is blocked: dw doctor
  3. Reset database: dw db reset

Need help? Search docs: dw docs "postgres connection"
```

### 3.3 Interactive Prompts

**Example: Service Selection**:
```bash
$ dw start

? Which services do you want to start? (Use â†‘â†“ arrows, space to select, enter to confirm)
  â—‰ api-router (required)
  â—‰ postgres-local (required)
  â—¯ engine
  â—‰ dormway-lockedin
  â—¯ dormway-admin
  â—¯ zuplo-gateway
  â—¯ ably-relay

[â—‰ = selected, â—¯ = not selected]
```

### 3.4 Configuration Profiles

**Save Common Setups**:
```bash
# Save current config as profile
dw profile save full-stack

# Load profile
dw profile load full-stack

# List profiles
dw profile list
  â€¢ minimal (postgres, api-router)
  â€¢ frontend (minimal + lockedin)
  â€¢ full-stack (all services)
  â€¢ backend-only (no frontend)
```

**Profile File** (`~/.dw/profiles/full-stack.json`):
```json
{
  "name": "full-stack",
  "description": "All services for full-stack development",
  "services": [
    "postgres-local",
    "redis-local",
    "api-router",
    "engine",
    "dormway-lockedin",
    "dormway-admin",
    "zuplo-gateway"
  ],
  "env": {
    "LOG_LEVEL": "debug",
    "ENABLE_DIAGNOSTICS": "true"
  }
}
```

---

## 4. Implementation Roadmap

### Phase 1: Quick Wins (Week 1)

**Goal**: Immediate productivity improvements

- [ ] Create diagnostic script (already done: `diagnose-clerk-setup.sh`)
- [ ] Implement `dw init` command for onboarding
- [ ] Add `dw doctor` for health checks
- [ ] Create `dw db schema <table>` shortcut
- [ ] Implement smart restart detection

**Deliverables**:
- Basic CLI with 5 core commands
- Diagnostic automation
- Improved onboarding docs

### Phase 2: Web Dashboard (Week 2)

**Goal**: Visual service management

- [ ] Build dev dashboard backend (Express + WebSocket)
- [ ] Create service management UI (React)
- [ ] Implement real-time log viewer
- [ ] Add database inspector
- [ ] Create diagnostics center

**Deliverables**:
- Working dashboard at `localhost:9999`
- Service start/stop/restart controls
- Log streaming
- Basic health checks

### Phase 3: Advanced Features (Week 3)

**Goal**: Power user features

- [ ] API test harness
- [ ] Environment variables manager
- [ ] Configuration profiles
- [ ] Enhanced CLI commands
- [ ] Integration with Linear/GitHub

**Deliverables**:
- Complete CLI tool (`dw`)
- Full-featured dashboard
- Developer documentation

### Phase 4: Polish & Documentation (Week 4)

**Goal**: Production-ready

- [ ] User testing with team
- [ ] Bug fixes and refinements
- [ ] Comprehensive documentation
- [ ] Video tutorials
- [ ] Obsidian knowledge base integration

**Deliverables**:
- v1.0 release
- Onboarding guide
- Troubleshooting docs

---

## 5. Success Metrics

**Developer Onboarding**:
- Current: 2-3 hours to first commit
- Target: under 30 minutes to first commit
- Measurement: Time from `git clone` to running app

**Debugging Time**:
- Current: 15-30 minutes to diagnose common issues
- Target: under 5 minutes with visual dashboard
- Measurement: Time to identify root cause

**API Call Reduction**:
- Current: ~50 calls per minute (dashboard)
- Target: ~15 calls per minute (with optimized caching)
- Measurement: Network tab monitoring

**Developer Satisfaction**:
- Survey: 1-5 rating on dev experience
- Target: 4.5+ average
- Measurement: Monthly team survey

---

## 6. Open Questions

1. **Hosting**: Should dev dashboard run as Docker service or standalone?
2. **Permissions**: How to handle Doppler secrets in UI (security)?
3. **CLI Distribution**: npm package or bundled binary?
4. **Customization**: Allow per-developer dashboard configs?
5. **Integration**: Connect to Linear for issue tracking?

---

## 7. Alternative Approaches Considered

### Alternative 1: Use Existing Tools (e.g., k9s, Portainer)
**Pros**: No development needed
**Cons**: Generic, not DormWay-specific, steeper learning curve
**Decision**: Build custom - DormWay-specific needs justify custom tool

### Alternative 2: Extend Docker Desktop
**Pros**: Familiar interface
**Cons**: Limited customization, not all devs use Docker Desktop
**Decision**: Build standalone - more flexibility

### Alternative 3: VS Code Extension
**Pros**: Integrated with IDE
**Cons**: Excludes non-VS Code users, limited UI capabilities
**Decision**: Web dashboard - accessible to everyone

---

## 8. Related Documentation

- [RILEY_CLERK_ZUPLO_SETUP](/docs/engineering/development/rileyclerkzuplosetup) - Troubleshooting guide that inspired this
- [Zuplo Gateway Migration](/docs/engineering/development/zuplo-gateway-migration) - Service integration patterns
- [Obsidian Vault Search System](/docs/engineering/development/obsidian-vault-search-system) - Knowledge base integration
- `CLAUDE.md` - Main development guide
- `scripts/dev/diagnose-clerk-setup.sh` - Diagnostic script

---

**Tags**: #development #devex #tooling #productivity #proposal
**Status**: ğŸ“‹ Awaiting approval
**Next Steps**:
1. Review with engineering team
2. Prioritize features
3. Assign development resources
4. Create Linear epic
