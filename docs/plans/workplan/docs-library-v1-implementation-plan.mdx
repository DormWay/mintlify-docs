---
title: "Docs Library v1 Implementation Plan"
description: "Ship a minimal but complete Docs/Library experience: upload files, find them fast, open + take notes in-context, and link notes to coursework."
---

# Docs (Library) v1 - Implementation Plan

> Bring the current Docs tab to a fully functional Library surface (files + notes) without changing the main nav.

---

## Summary

### Objective
Ship a minimal but complete Docs/Library experience: upload files, find them fast, open + take notes in-context, and link notes to coursework.

### Scope
- In scope: Docs/Notes routing, course filtering, unified search, doc viewer + notes panel, deep-link hooks from Schedule/Tasks/Courses.
- Out of scope: full `/dashboard/library` route, Focus Panel migration, multi-user sharing.

---

## Current State

### What Exists Today
- Docs (`/dashboard/documents`) list + upload + summary preview.
- Notes Hub (`/dashboard/notes-hub`) editor + sync.
- Schedule/Tasks deep links call `buildNotesLink`, but query params are dropped on redirect.

### Pain Points
- No doc viewer + side notes loop.
- No unified search across docs + notes.
- Course filtering exists for docs but not for notes creation via deep links.

### Relevant Code Locations
| Component | Path |
|-----------|------|
| Docs page | `services/dormway-lockedin/src/app/dashboard/documents/page.tsx` |
| Notes Hub | `services/dormway-lockedin/src/app/dashboard/notes-hub/page.tsx` |
| Notes list | `services/dormway-lockedin/src/components/NotesList.tsx` |
| Notes sync | `services/dormway-lockedin/src/lib/notes-sync.ts` |
| Notes deep link | `services/dormway-lockedin/src/lib/noteLinks.ts` |

---

## Target State

### Key Changes
1) Docs is the Library surface with a small subnav (Files / Notes / Search).
2) Notes deep links preserve context and prefill title/course/date.
3) Doc viewer + side notes panel enable the study loop.

---

## Implementation Phases

### Phase 1: Routing + Deep Links
**Goal**: Fix the notes entry flow and contextual prefill.

**Tasks**:
- [ ] Update `buildNotesLink` to route directly to `/dashboard/notes-hub` and preserve query params.
- [ ] Teach Notes Hub to read `contextId`, `title`, `date`, and prefill note metadata.
- [ ] Emit telemetry for "notes_opened" with course context.

**Deliverables**:
- Contextual "Open notes" from Schedule/Tasks creates the right note.

**Definition of Done**:
- [ ] Deep link parameters survive navigation.
- [ ] Notes Hub prefill works for class sessions.

---

### Phase 2: Library IA + Search
**Goal**: Add Library subnav and basic search across docs + notes.

**Tasks**:
- [ ] Add Docs subnav (Files / Notes / Search).
- [ ] Implement metadata search for docs + notes (title/body).
- [ ] Add course filter persistence across Files + Notes.

**Deliverables**:
- Minimal search results list with doc/note grouping.

**Definition of Done**:
- [ ] Search returns docs + notes in < 500ms for cached queries.
- [ ] Course filter works in Files and Notes.

---

### Phase 3: Doc Viewer + Side Notes
**Goal**: Enable the study loop inside Docs.

**Tasks**:
- [ ] Add document viewer (PDF/doc) with persistent scroll.
- [ ] Add a notes panel or bottom sheet tied to the open document.
- [ ] Store doc&lt;-&gt;note linking metadata (note metadata or lightweight link table).

**Deliverables**:
- Students can open a doc and create a linked note without leaving Docs.

**Definition of Done**:
- [ ] Viewer loads common formats.
- [ ] Linked note opens with doc context.
- [ ] Scroll position is restored on reopen.

---

## Testing Plan

### Manual QA
- [ ] Upload a document and confirm it appears in Files.
- [ ] Click "Open notes" from Schedule; note is created with class context.
- [ ] Search finds both a document and a note.
- [ ] Open a document and create a linked note.

---

## Risks & Dependencies

### Risks
| Risk | Impact | Mitigation |
|------|--------|------------|
| Doc viewer format coverage | Medium | Start with PDF, add doc/docx later |
| Notes search performance | Medium | Start with title/body search; add RAG later |

### Dependencies
- Notes metadata persistence (course context + optional doc link).
- BrainGains document APIs for list + summary + download.

---

## Related Documentation
- [Docs Library v1 Spec (Current)](/docs/engineering/architecture/docs-library-v1-spec-current)
- [Library (Docs & Notes)](/docs/engineering/architecture/sot-library-docs-notes)
- [BrainGains & RAG](/docs/engineering/architecture/sot-braingains-rag)
