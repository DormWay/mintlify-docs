---
title: "Schedule ICS Export"
description: "Goal: Allow students to export their entire term schedule as an .ics file that imports cleanly into calendar apps."
---

# TODO: Full-Term Schedule ICS Export

Goal: Allow students to export their entire term schedule as an .ics file that imports cleanly into calendar apps.

Requirements
- Export scope: whole term (instruction start → end), not just current week.
- Sources: `student_time_blocks` (source=mobile, type=class) as canonical events.
- Recurrence: detect weekly patterns and emit RRULEs when possible; otherwise enumerate VEVENTs.
- Timezones: use campus/user timezone (fallback to America/Detroit) and convert to UTC in ICS.
- De-duplication: collapse component duplicates and identical occurrences.
- Metadata: `SUMMARY` = course code/name, `LOCATION` from metadata/location, `DESCRIPTION` minimal.

API Design
- Endpoint: `POST /v1/mobile/calendar/export-ics`
  - body: `{ termId?: string, start?: string, end?: string }`
  - returns: `text/calendar` body (attachment) or `{ url }` to signed download

Implementation Steps
- Query student_time_blocks for the term window (user_id filter, source=mobile, type=class).
- Group by course/component; infer weekly patterns → RRULE.
- Generate ICS with DTSTAMP, DTSTART/DTEND (UTC), UID, RRULE/VEVENT per block.
- Optional: signed S3 object for large terms; otherwise stream response.

Validation
- Import into Apple Calendar, Google Calendar to verify times, recurrence, and locations.

Notes
- Client button is disabled for now pending full-term export.
